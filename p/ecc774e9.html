<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>编译原理复习 | 番茄元🍅の小窝</title><meta name="author" content="tomatoyuan"><meta name="copyright" content="tomatoyuan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="第1章 绪论 1.1 什么是编译 编译： 将高级语言（源语言）翻译成汇编语言或机器语言（机器语言）的过程。   编译在语言处理系统中的位置   预处理器：  把存储在不同文件中的源程序聚合在一起 把称为宏的缩写语句转换为原始语句    可重定位（Relocatable）： 在内存中存放的起始地址 L 是不固定的。   链接器：  将多个可重定位的机器代码文件（包括库文件）连接到一起 解决外部内存地">
<meta property="og:type" content="article">
<meta property="og:title" content="编译原理复习">
<meta property="og:url" content="https://tomatoyuan.github.io/p/ecc774e9.html">
<meta property="og:site_name" content="番茄元🍅の小窝">
<meta property="og:description" content="第1章 绪论 1.1 什么是编译 编译： 将高级语言（源语言）翻译成汇编语言或机器语言（机器语言）的过程。   编译在语言处理系统中的位置   预处理器：  把存储在不同文件中的源程序聚合在一起 把称为宏的缩写语句转换为原始语句    可重定位（Relocatable）： 在内存中存放的起始地址 L 是不固定的。   链接器：  将多个可重定位的机器代码文件（包括库文件）连接到一起 解决外部内存地">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tomatoyuan.github.io/img/bg95.jpg">
<meta property="article:published_time" content="2023-05-22T02:28:36.000Z">
<meta property="article:modified_time" content="2023-05-22T02:31:01.526Z">
<meta property="article:author" content="tomatoyuan">
<meta property="article:tag" content="编译原理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tomatoyuan.github.io/img/bg95.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://tomatoyuan.github.io/p/ecc774e9"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: tomatoyuan","link":"链接: ","source":"来源: 番茄元🍅の小窝","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '编译原理复习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-22 10:31:01'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/mylogo.bmp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">59</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/bg95.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">番茄元🍅の小窝</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">编译原理复习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-22T02:28:36.000Z" title="发表于 2023-05-22 10:28:36">2023-05-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-05-22T02:31:01.526Z" title="更新于 2023-05-22 10:31:01">2023-05-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">基础知识</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="编译原理复习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>第1章 绪论</h1>
<h2 id="1-1-什么是编译">1.1 什么是编译</h2>
<p><strong>编译：</strong> 将<font color="blue">高级语言（源语言）</font>翻译成<font color="red">汇编语言</font>或<font color="red">机器语言（机器语言）</font>的过程。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230505142953287.png" class title="image-20230505142953287">
<p><font size="5" color="green"><b>编译在语言处理系统中的位置</b></font></p>
<ul>
<li>
<p><strong>预处理器：</strong></p>
<ul>
<li>把存储在不同文件中的源程序聚合在一起</li>
<li>把称为宏的缩写语句转换为原始语句</li>
</ul>
</li>
<li>
<p><strong>可重定位（Relocatable）：</strong></p>
<p>在内存中存放的起始地址 L 是不固定的。</p>
</li>
<li>
<p><strong>链接器：</strong></p>
<ul>
<li>将多个可重定位的机器代码文件（包括库文件）连接到一起</li>
<li>解决外部内存地址问题</li>
</ul>
</li>
<li>
<p><strong>加载器：</strong></p>
<p>修改可重定位地址：将修改后的指令和数据放到内存中的适当位置。</p>
</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230505144010769.png" class title="image-20230505144010769">
<h2 id="1-2-编译系统的结构">1.2 编译系统的结构</h2>
<p><strong>编译系统的结构与执行顺序如下图所示：</strong></p>
<p>将字符流输入 <strong>词法分析器</strong> 获得词法单元流，然后经过 <strong>语法分析器</strong> 生成语法分析树。利用 <strong>语义分析器</strong> 来分析语法分析树所具有的语义。获得语义后，利用 <strong>中间代码生成器</strong> 将语法分析树转换成中间代码。中间代码为了具有更好的普适性，经过了一步 <strong>机器无关代码优化</strong> 。</p>
<p>优化后的中间表示形式经 <strong>目标代码生成器</strong> 转化为目标机器语言，再经过一步优化转化为与 <strong>目标机器相关</strong> 的目标机器语言，此时的代码将更好的在目标机器上执行。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301215052177.png" class title="image-20230301215052177">
<h3 id="1-2-1-词法分析-扫描-scanning">1.2.1 词法分析/扫描（Scanning）</h3>
<p><strong>词法分析的主要任务：</strong></p>
<p>从左向右逐行扫描源程序的字符，识别出各个单词，确定单词的类型。将识别出的单词转换成统一的机内表示——**词法单元(token)**形式。</p>
<p><code>token：&lt; 种别码，属性值 &gt;</code></p>
<table>
<thead>
<tr>
<th></th>
<th><strong>单词类型</strong></th>
<th><strong>种别</strong></th>
<th><strong>种别码</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>1</strong></td>
<td><strong>关键字</strong></td>
<td>program、if、else、then、…</td>
<td>一词一码</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><strong>标识符</strong></td>
<td>变量名、数组名、记录名、过程名、…</td>
<td>多词一码</td>
</tr>
<tr>
<td><strong>3</strong></td>
<td><strong>常量</strong></td>
<td>整型、浮点型、字符型、布尔型、…</td>
<td>一型一码</td>
</tr>
<tr>
<td><strong>4</strong></td>
<td><strong>运算符</strong></td>
<td>算术（  <strong>+ -</strong> * /  ++ – ）  <br>关系（ &gt;   &lt;  ==  !=  &gt;=  &lt;= ） <br>逻辑（  &amp;   |  ~ ）</td>
<td>一词一码<br>或<br>一型一码</td>
</tr>
<tr>
<td><strong>5</strong></td>
<td><strong>界限符</strong></td>
<td>; (   ) =   { } …</td>
<td>一词一码</td>
</tr>
</tbody>
</table>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301215842838.png" class title="image-20230301215842838">
<h3 id="1-2-2-语法分析-parsing">1.2.2 语法分析（parsing）</h3>
<p>**语法分析器(parser)**从词法分析器输出的 token 序列中识别出各类短语，并构造语法分析树（parse tree）。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301220009974.png" class title="image-20230301220009974">
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301220050409.png" class title="image-20230301220050409">
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301220210896.png" class title="image-20230301220210896">
<h3 id="1-2-3-语义分析">1.2.3 语义分析</h3>
<p><font size="5"><b>语义分析的主要任务：</b></font></p>
<p><font size="4" color="green"><b>一、收集标识符的属性信息</b></font></p>
<ul>
<li>
<p><strong>种属 (Kind)</strong></p>
<p>简单变量、复合变量（数组、记录、…）、过程、…</p>
</li>
<li>
<p><strong>类型 (Type)</strong></p>
<p>整型、实型、字符型、布尔型、指针型、…</p>
</li>
<li>
<p><strong>存储位置、长度</strong></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301220446762.png" class title="image-20230301220446762">
</li>
<li>
<p><strong>值</strong></p>
</li>
<li>
<p><strong>作用域</strong></p>
</li>
<li>
<p><strong>参数和返回值信息</strong><br>
参数个数、参数类型、参数传递方式、返回值类型、…</p>
</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230505151621412.png" class title="image-20230505151621412">
<blockquote>
<p><strong>思考：</strong> 符号表中为什么要设计字符串表这样一种数据结构？</p>
<p>答：由于不同的标识符的NAME字段的长度不同：</p>
<ol>
<li>如果设计为定长存储，则造成内存浪费</li>
<li>如果设计为变长存储，则查询效率会大大降低</li>
</ol>
<p>这样的字符串表设计，通过指针指向首地址，并标明NAME字段的长度，可以节省空间，同时具有极好查询性能。</p>
</blockquote>
<p><font size="4" color="green"><b>二、语义检查</b></font></p>
<blockquote>
<p>了解即可，没啥好记的。</p>
</blockquote>
<p>变量（包括数组、指针、结构体）或过程<strong>未经声明就使用</strong><br>
变量（包括数组、指针、结构体）或过程名<strong>重复声明</strong><br>
<strong>运算分量</strong>类型不匹配<br>
<strong>操作符</strong>与<strong>操作数</strong>之间的类型不匹配</p>
<ul>
<li><strong>赋值号</strong>左边出现一个只有右值的表达式</li>
<li><strong>数组下标</strong>不是整数</li>
<li>对<strong>非数组变量</strong>使用数组访问操作符</li>
<li>对<strong>非结构体类型变量</strong>使用“.”操作符</li>
<li>对<strong>非过程名</strong>使用过程调用操作符</li>
<li>过程调用的<strong>参数类型或数目</strong>不匹配</li>
<li>函数<strong>返回类型</strong>有误</li>
</ul>
<h3 id="1-2-4-中间代码生成器">1.2.4 中间代码生成器</h3>
<p><font size="4"><b>常用的中间表示形式：</b></font></p>
<p><font color="green" size="4"><b>一、三地址码</b></font></p>
<p>三地址码由类似于汇编语言的指令序列组成，每个指令<strong>最多</strong>有三个操作数(operand)。</p>
<blockquote>
<p>三地址指令序列唯一确定了运算完成的顺序。</p>
</blockquote>
<p><strong>常用的三元地址指令如下：</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301222138716.png" class title="image-20230301222138716">
<p><font size="4"><b>三地址指令的表示：</b></font></p>
<ul>
<li>
<p><font color="blue">四元式 (Quadruples) </font><br>
<code>(op, arg1, arg2, result)</code></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301222355141.png" class title="image-20230301222355141">
</li>
<li>
<p>三元式 (Triples)<br>
<code>(op, arg1, agr2)</code></p>
</li>
<li>
<p>间接三元式 (Indirect triples)</p>
</li>
</ul>
<p><font color="green" size="4"><b>二、语法结构树/语法树（Syntax Trees）</b></font></p>
<p>一个程序片段，既可以表示为三地址码的形式（如右边蓝色的框中），也可以表示为语法结构树的形式（如下左图）。</p>
<blockquote>
<p>怎么由这棵语法树转换为三地址指令呢？后面会学到。</p>
</blockquote>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301222543969.png" class title="image-20230301222543969">
<h3 id="1-2-5-目标代码生成器">1.2.5 目标代码生成器</h3>
<p>目标代码生成以源程序的<strong>中间表示形式</strong>作为输入，并把它映射到<strong>目标语言</strong>。</p>
<p><font color="red">目标代码生成的一个重要任务是为程序中使用的变量<strong>合理分配寄存器</strong>。</font></p>
<h3 id="1-2-6-代码优化">1.2.6 代码优化</h3>
<p>为改进代码所进行的等价程序变换，使其运行得更快一些、占用空间更少一些，或者二者兼顾。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301222952042.png" class title="image-20230301222952042">
<h2 id="1-3-编译程序的生成">1.3 编译程序的生成</h2>
<p><font color="blue" size="5">编译器的 T 形图</font></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301225334398.png" class title="image-20230301225334398">
<h3 id="1-3-1-font-color-green-size-5-b-自展-b-font">1.3.1 <font color="green" size="5"><b>自展</b></font></h3>
<p><strong>在同一机器上实现不同语言的编译器。</strong></p>
<blockquote>
<p>为了好理解，下图中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>P</mi><mi>i</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup></mrow><annotation encoding="application/x-tex">P_i&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.010556em;vertical-align:-0.258664em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.441336em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.258664em;"><span></span></span></span></span></span></span></span></span></span> 视为我们期望的最终编译器效果（例如，用L1实现对L2的编译）。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是最终在已有编译器的基础上实现的效果（例如，利用P1编译器实现了L2程序通过层层转换最终编译为A程序）。</p>
</blockquote>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301230200689.png" class title="image-20230301230200689">
<p><strong>构造P1：</strong> 只需要将 L1程序 通过 A语言 转换为 A程序 即可；</p>
<p><strong>构造P2：</strong> 为了方便，使用高级语言L1实现编译器。将 L2程序 通过 L1语言 转换为 A程序，中间经历了 L2→L1→A 的过程。</p>
<p><strong>构造P3：</strong> 使用高级语言L2实现编译器。将 L3程序 通过 L2语言 转换为 A程序，中间经历了 L3→L2→L1→A 的过程。</p>
<p>如果继续这个过程，<strong>自展</strong>情况如下：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301230229294.png" class title="image-20230301230229294">
<h3 id="1-3-2-font-color-green-size-5-b-移植-交叉编译-b-font">1.3.2 <font color="green" size="5"><b>移植（交叉编译）</b></font></h3>
<p>将一台机器上运行的编译器进行处理，构造出在另一个台机器上可以运行的编译器。</p>
<p><strong>使同一程序运行在不同机器上。</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230301230546705.png" class title="image-20230301230546705">
<p>如上图，首先在 A机器 上构造  L程序 的编译器。这样就可以使用 L语言 构造其他编译器了。</p>
<p>我们的目标是构造一个 P2 使其能够运行在 B 机器上。首先，通过 P1 可以构造出一个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>P</mi><mn>2</mn><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msubsup></mrow><annotation encoding="application/x-tex">P_2&#x27;&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.4518920000000004em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span></span></span></span> ，该编译器在功能上与 P2 相同，但是是由 A语言 实现的，并不能运行在 B机器 上。不过此时我们有了可以从 L程序 经过 A语言 编译为 B代码 的编译器 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>P</mi><mn>2</mn><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msubsup></mrow><annotation encoding="application/x-tex">P_2&#x27;&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.4518920000000004em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span></span></span></span> 。</p>
<p>利用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>P</mi><mn>2</mn><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msubsup></mrow><annotation encoding="application/x-tex">P_2&#x27;&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-2.4518920000000004em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span></span></span></span> ，可以通过 L→A→B 的编译语言的转化过程，从而实现利用 B语言 将 L程序 编译为 B代码 的编译器 P2。</p>
<h2 id="1-4-为什么要学习编译原理">1.4 为什么要学习编译原理</h2>
<ul>
<li>
<p>更深刻地理解高级语言程序的内部运行机制</p>
</li>
<li>
<p>教给我们如何严谨地去思考、编写程序</p>
</li>
<li>
<p>编译原理涉及了计算机科学求解问题的基本思路和方法，即问题的“形式化描述→自动化处理”</p>
</li>
<li>
<p>所涉及的理论和方法在很多领域都会被用到</p>
<p>自然语言处理、模式识别、人工智能、……</p>
</li>
<li>
<p>很多应用软件都会用到编译技术</p>
</li>
</ul>
<h2 id="1-5-编译技术的应用">1.5 编译技术的应用</h2>
<ul>
<li>
<p><font color="blue" size="4">结构化编辑器（Structure editors）</font></p>
<p>引导用户在语言的<strong>语法约束</strong>下编制程序</p>
<ul>
<li>能自动地提供<strong>关键字</strong>和<strong>与其匹配的关键字</strong></li>
</ul>
</li>
<li>
<p><font color="blue" size="4">智能打印机（Pretty printers）</font></p>
<p>对程序进行分析，打印出<strong>结构清晰的程序</strong></p>
<ul>
<li>注释以一种特殊的字体打印</li>
<li>根据各个语句在程序的层次结构中的<strong>嵌套深度</strong>进行<strong>缩进</strong></li>
</ul>
</li>
<li>
<p><font color="blue" size="4">静态检测器（Static checkers）</font></p>
<p>静态定位程序中的错误</p>
<ul>
<li>释放<strong>空指针</strong>或<strong>已释放过的指针</strong></li>
<li>检测出程序中<strong>永远不能被执行的语句</strong></li>
</ul>
</li>
<li>
<p><font color="blue" size="4">文本格式器（Text formatters）</font></p>
<p>文本格式器处理的<strong>字符流</strong>中除了<strong>需要排版输出的字符</strong>以外，还包含一些<strong>用来说明</strong>字符流中的段落、图表或者上标和下标等<strong>数学结构的命令</strong></p>
</li>
<li>
<p><font color="blue" size="4">数据库查询解释器（ Database Query Interpreters ）</font></p>
<p>数据库查询语句由包含了关系和布尔运算的谓词组成。查询解释器把这些<strong>谓词</strong>翻译成<strong>数据库命令</strong>，在数据库中查询满足条件的记录。</p>
</li>
<li>
<p><font color="blue" size="4">高级语言的翻译工具</font></p>
</li>
</ul>
<h1>第2章 语言及其文法</h1>
<h2 id="2-1-基本概念">2.1 基本概念</h2>
<p><strong>串（String）：</strong> 是一个有穷符号（symbol）序列。</p>
<p><strong>字母表（Alphabet）：</strong> 是一个有穷符号集合。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230505164435660.png" class title="image-20230505164435660">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230505164538946.png" class title="image-20230505164538946">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230505164621670.png" class title="image-20230505164621670">
<h2 id="2-2-文法的定义">2.2 文法的定义</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230505174112912.png" class title="image-20230505174112912">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506190353904.png" class title="image-20230506190353904">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506190519872.png" class title="image-20230506190519872">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506190550862.png" class title="image-20230506190550862">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506190638794.png" class title="image-20230506190638794">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506190832511.png" class title="image-20230506190832511">
<h2 id="2-3-语言的定义">2.3 语言的定义</h2>
<h3 id="2-3-1-font-color-green-size-5-b-文法-b-font">2.3.1 <font color="green" size="5"><b>文法</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506190940760.png" class title="image-20230506190940760">
<h3 id="2-3-2-font-color-green-size-5-b-推导-derivations-和归约-reductions-b-font">2.3.2 <font color="green" size="5"><b>推导（Derivations）和归约（Reductions）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506191342067.png" class title="image-20230506191342067">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506191356765.png" class title="image-20230506191356765">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506191422136.png" class title="image-20230506191422136">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506191451324.png" class title="image-20230506191451324">
<h3 id="2-3-3-font-color-green-size-5-b-句型-sentential-form-和句子-sentence-b-font">2.3.3 <font color="green" size="5"><b>句型（sentential form）和句子（sentence）</b></font></h3>
<ul>
<li><strong>句型</strong>：既可以包含终结符，也可以包含非终结符，也可以是空串。</li>
<li><strong>句子</strong>：不包含非终结符。</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506191852388.png" class title="image-20230506191852388">
<h3 id="2-3-4-font-color-green-size-5-b-语言的形式化定义-b-font">2.3.4 <font color="green" size="5"><b>语言的形式化定义</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506192409968.png" class title="image-20230506192409968">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506192529715.png" class title="image-20230506192529715">
<h3 id="2-3-5-font-color-green-size-5-b-语言上的运算-b-font">2.3.5 <font color="green" size="5"><b>语言上的运算</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506192657389.png" class title="image-20230506192657389">
<h2 id="2-4-文法的分类">2.4 文法的分类</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506192749046.png" class title="image-20230506192749046">
<h3 id="2-4-1-font-color-green-size-5-b-0型-文法-type-0-grammer-b-font">2.4.1 <font color="green" size="5"><b>0型 文法（Type-0 Grammer）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506193105830.png" class title="image-20230506193105830">
<h3 id="2-4-2-font-color-green-size-5-b-1型-文法-type-1-grammer-b-font">2.4.2 <font color="green" size="5"><b>1型 文法（Type-1 Grammer）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506193547342.png" class title="image-20230506193547342">
<h3 id="2-4-3-font-color-green-size-5-b-2型-文法-type-2-grammer-b-font">2.4.3 <font color="green" size="5"><b>2型 文法（Type-2 Grammer）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506193821559.png" class title="image-20230506193821559">
<h3 id="2-4-4-font-color-green-size-5-b-3型-文法-type-3-grammer-b-font">2.4.4 <font color="green" size="5"><b>3型 文法（Type-3 Grammer）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506194018456.png" class title="image-20230506194018456">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506194033127.png" class title="image-20230506194033127">
<h3 id="2-4-5-font-color-green-size-5-b-四种文法之间的关系-b-font">2.4.5 <font color="green" size="5"><b>四种文法之间的关系</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506194300467.png" class title="image-20230506194300467">
<h2 id="2-5-cfg的语法分析树">2.5 CFG的语法分析树</h2>
<h3 id="2-5-1-font-color-green-size-5-b-树的产出-yield-或边缘-frontier-b-font">2.5.1 <font color="green" size="5"><b>树的产出（yield）或边缘（frontier）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506194758810.png" class title="image-20230506194758810">
<blockquote>
<p>注意：产出（边缘）是指所有叶节点从左到右排列得到的符号串。</p>
</blockquote>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506195316987.png" class title="image-20230506195316987">
<h3 id="2-5-2-font-color-green-size-5-b-短语-phrase-和直接短语-immediate-phrase-b-font">2.5.2 <font color="green" size="5"><b>短语（phrase）和直接短语（immediate phrase）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506195435558.png" class title="image-20230506195435558">
<h3 id="2-5-3-font-color-green-size-5-b-二义性文法-ambiguous-grammer-b-font">2.5.3 <font color="green" size="5"><b>二义性文法（Ambiguous Grammer）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506195654287.png" class title="image-20230506195654287">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506200143949.png" class title="image-20230506200143949">
<p><font color="blue" size="5">二义性文法的判定</font></p>
<p><strong>对于任意一个上下文无关文法，不存在一个算法，判定它是否为二义性的；</strong></p>
<p><strong>但能给出一组充分条件，满足这组充分条件的文法是无二义性的</strong></p>
<ul>
<li>满足，肯定无二义性</li>
<li>不满足，也未必就是有二义性的</li>
</ul>
<h1>第3章 词法</h1>
<h2 id="3-1-单词的描述">3.1 单词的描述</h2>
<h3 id="3-1-1-font-color-green-size-5-b-正则表达式-regular-expression-re-b-font">3.1.1 <font color="green" size="5"><b>正则表达式（Regular Expression, RE）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506201126797.png" class title="image-20230506201126797">
<h3 id="3-1-2-font-color-green-size-5-b-正则定义-regular-definition-b-font">3.1.2 <font color="green" size="5"><b>正则定义（Regular Definition）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506202932372.png" class title="image-20230506202932372">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506202944617.png" class title="image-20230506202944617">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506203650635.png" class title="image-20230506203650635">
<h2 id="3-2-单词的识别">3.2 单词的识别</h2>
<h3 id="3-2-1-font-color-green-size-5-b-有穷自动机-finite-automata-b-font">3.2.1  <font color="green" size="5"><b>有穷自动机（Finite Automata）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506204054516.png" class title="image-20230506204054516">
<p><font color="blue" size="5">FA模型</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506204343208.png" class title="image-20230506204343208">
<p><font color="blue" size="5">FA的表示</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506204605325.png" class title="image-20230506204605325">
<p><font color="blue" size="5">FA定义（接收）的语言</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506204633658.png" class title="image-20230506204633658">
<p><font color="blue" size="5">满足最长子串匹配原则（Longest String Matching Principle）</font></p>
<h3 id="3-2-2-font-color-green-size-5-b-有穷自动机的分类-b-font">3.2.2  <font color="green" size="5"><b>有穷自动机的分类</b></font></h3>
<h4 id="①确定的fa-deterministic-finite-automata-dfa">①确定的FA（Deterministic finite automata, DFA）</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506205127469.png" class title="image-20230506205127469">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506205213541.png" class title="image-20230506205213541">
<h4 id="②非确定的fa-nondeterministic-finite-automata-nfa">②非确定的FA（Nondeterministic finite automata, NFA）</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506205258391.png" class title="image-20230506205258391">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506205333426.png" class title="image-20230506205333426">
<h4 id="③dfa与nfa的等价性">③DFA与NFA的等价性</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506205420463.png" class title="image-20230506205420463">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506205813709.png" class title="image-20230506205813709">
<h4 id="④re-nfa-dfa-转化">④RE-&gt;NFA-&gt;DFA(转化)</h4>
<p>下面的内容均以上图为例题：</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wkfvawl/p/13040653.html">参考博客1</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/31158595">参考博客2</a></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/v2-450e5eadd188467c5f836d20012abc55_r.jpg" class title="img">
<p>因为 NFA 的状态转移不确定，不适合直接做词法分析器的识别，在写算法时往往需要使用回溯。所以我们一般使用子集构造算法，将 NFA 转换成 DFA， 得到确定的状态转移，再转化成一个词法分析器的代码。</p>
<p><font color="blue" size="4">1.NFA→DFA</font></p>
<p><strong>子集构造法：</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230506214004495.png" class title="image-20230506214004495">
<p>下面从开始状态出发，构造可到达的子集，发现新的子集（ (～￣▽￣)～）则利用新子集继续构造子集，直到没有子集可以构造为止。</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>1</mn></msub><mo>=</mo><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_1=\{0\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>1</mn></msub><mo><mover><mo><mo>→</mo></mo><mi>a</mi></mover></mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_1 \stackrel{a}{\rightarrow} \{0,1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.162702em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.968262em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span> 即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>2</mn></msub><mo>=</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_2 = \{0,1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span>  (～￣▽￣)～</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>1</mn></msub><mo><mover><mo><mo>→</mo></mo><mi>b</mi></mover></mo><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_1 \stackrel{b}{\rightarrow} \{0\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.347418em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.152978em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>2</mn></msub><mo><mover><mo><mo>→</mo></mo><mi>a</mi></mover></mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_2 \stackrel{a}{\rightarrow} \{0,1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.162702em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.968262em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>2</mn></msub><mo><mover><mo><mo>→</mo></mo><mi>b</mi></mover></mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_2 \stackrel{b}{\rightarrow} \{0,2\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.347418em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.152978em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mclose">}</span></span></span></span> 即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>3</mn></msub><mo>=</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_3 = \{0,2\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mclose">}</span></span></span></span>  (～￣▽￣)～</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>3</mn></msub><mo><mover><mo><mo>→</mo></mo><mi>a</mi></mover></mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_3 \stackrel{a}{\rightarrow} \{0,1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.162702em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.968262em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>3</mn></msub><mo><mover><mo><mo>→</mo></mo><mi>b</mi></mover></mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_3 \stackrel{b}{\rightarrow} \{0,3\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.347418em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.152978em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mclose">}</span></span></span></span> 即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>4</mn></msub><mo>=</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_4 = \{0,3\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mclose">}</span></span></span></span>  (～￣▽￣)～</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>4</mn></msub><mo><mover><mo><mo>→</mo></mo><mi>a</mi></mover></mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_4 \stackrel{a}{\rightarrow} \{0,1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.162702em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.968262em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>4</mn></msub><mo><mover><mo><mo>→</mo></mo><mi>b</mi></mover></mo><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">q_4 \stackrel{b}{\rightarrow} \{0\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.347418em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mop op-limits"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.152978em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">→</span></span></span><span style="top:-3.5668699999999998em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span></span></span></span></p>
<p>到这里就没有新的子集可以构造了，那么构造的 DFA 如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507002216868.png" class title="image-20230507002216868">
<p><strong>利用状态转换表实现：</strong></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507102043790.png" class title="image-20230507102043790">
<table>
<thead>
<tr>
<th>状态重命名</th>
<th>将来要列的状态</th>
<th>a</th>
<th>b</th>
<th>新产生的状态集合</th>
</tr>
</thead>
<tbody>
<tr>
<td>S0</td>
<td>{0}</td>
<td>{0,1}</td>
<td>{0}</td>
<td>{0,1}</td>
</tr>
<tr>
<td>S1</td>
<td>{0,1}</td>
<td>{0,1}</td>
<td>{0,2}</td>
<td>{0,2}</td>
</tr>
<tr>
<td>S2</td>
<td>{0,2}</td>
<td>{0,1}</td>
<td>{0,3*}</td>
<td>{0,3*}</td>
</tr>
<tr>
<td>S3</td>
<td>{0,3*}</td>
<td>{0,1}</td>
<td>{0}</td>
<td></td>
</tr>
</tbody>
</table>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507003644983.png" class title="image-20230507003644983">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507003718167.png" class title="image-20230507003718167">
<p><font color="blue" size="4">2.RE→NFA</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20200327101922311.png" class title="image-20200327101922311">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20200327102237196.png" class title="image-20200327102237196">
<h4 id="⑤带有-varepsilon-边-的nfa">⑤带有“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi><mo>−</mo></mrow><annotation encoding="application/x-tex">\varepsilon -</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">ε</span><span class="mord">−</span></span></span></span>边”的NFA</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507095900118.png" class title="image-20230507095900118">
<h3 id="⑥带有和不带有-varepsilon-边-的nfa的等价性">⑥带有和不带有“<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi><mo>−</mo></mrow><annotation encoding="application/x-tex">\varepsilon-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">ε</span><span class="mord">−</span></span></span></span>边”的NFA的等价性</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507100059409.png" class title="image-20230507100059409">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507100929285.png" class title="image-20230507100929285">
<h3 id="3-2-3-font-color-green-size-5-b-从正则表达式到有穷自动机-b-font">3.2.3  <font color="green" size="5"><b>从正则表达式到有穷自动机</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507102254284.png" class title="image-20230507102254284">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507102446040.png" class title="image-20230507102446040">
<h4 id="子集构造法-subset-construction-伪代码">子集构造法（subset construction）伪代码</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507102533763.png" class title="image-20230507102533763">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507102544899.png" class title="image-20230507102544899">
<h3 id="3-2-4-font-color-green-size-5-b-识别单词的dfa-b-font">3.2.4  <font color="green" size="5"><b>识别单词的DFA</b></font></h3>
<p><font color="blue" size="5">识别标识符的DFA</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507104229627.png" class title="image-20230507104229627">
<p><font color="blue" size="5">识别无符号数的DFA</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507104544318.png" class title="image-20230507104544318">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507104355570.png" class title="image-20230507104355570">
<p><font color="blue" size="5">识别各进制的无符号整数的DFA</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507104720082.png" class title="image-20230507104720082">
<p><font color="blue" size="5">识别注释的DFA</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507104750586.png" class title="image-20230507104750586">
<p><font color="blue" size="5">识别Token的DFA</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507104822392.png" class title="image-20230507104822392">
<h2 id="3-3-词法分析阶段的错误处理">3.3 词法分析阶段的错误处理</h2>
<h3 id="3-3-1-font-color-green-size-5-b-错误检测类型-b-font">3.3.1 <font color="green" size="5"><b>错误检测类型</b></font></h3>
<p><strong>词法错误的类型</strong></p>
<ul>
<li>
<p>单词拼写错误</p>
<p>例：int i = 0x3G;  float j =1.05e;</p>
</li>
<li>
<p>非法字符例：~ @</p>
</li>
</ul>
<p><strong>词法错误检测</strong></p>
<ul>
<li>如果当前状态与当前输入符号在 <strong>转换表对应项中的信息为空</strong> ，而 <strong>当前状态又不是终止状态</strong> ，则调用错误处理程序</li>
</ul>
<h3 id="3-3-2-font-color-green-size-5-b-错误处理-b-font">3.3.2 <font color="green" size="5"><b>错误处理</b></font></h3>
<p><strong>查找已扫描字符串中最后一个对应于某终态的字符</strong></p>
<ul>
<li><strong>如果找到了</strong>，将该字符<strong>与其前面的字符识别成一个单词</strong>。然后将输入指针退回到该字符，扫描器重新回到初始状态，继续识别下一个单词</li>
<li><strong>如果没找到</strong>，则确定出错，采用错误恢复策略</li>
</ul>
<h3 id="3-3-3-font-color-green-size-5-b-错误恢复策略-b-font">3.3.3 <font color="green" size="5"><b>错误恢复策略</b></font></h3>
<p>最简单的错误恢复策略：“<font color="red">恐慌模式 </font>(panic mode)”恢复</p>
<ul>
<li>从剩余的输入中不断删除字符，直到词法分析器能够在剩余输入的开头发现一个正确的字符为止</li>
</ul>
<h2 id="3-4-词法分析器生成工具-lex">3.4 词法分析器生成工具 Lex</h2>
<p><strong>Lex的使用</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507105620281.png" class title="image-20230507105620281">
<p><strong>Lex</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507105636887.png" class title="image-20230507105636887">
<h1>第4章 语法分析</h1>
<p><strong>语法分析的主要任务：</strong></p>
<ul>
<li>根据给定的文法，识别输入句子的各个成分，从而构造出句子的分析树。</li>
<li>大部分程序设计语言的语法构造可以用 CFG 来描述，CFG 以 <code>token</code> 作为终结符。</li>
<li>大部分语法分析器都期望文法是无二义性的，否则，就不能为一个句子构造唯一的语法分析树。</li>
</ul>
<p><strong>语法分析的种类：</strong></p>
<ul>
<li>
<p>自顶向下分析（Top-Down Parsing）</p>
<p>从分析树的根节点向叶节点构造分析树</p>
<p>从文法开始符号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span> <font color="red">推导</font>出串 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></p>
</li>
<li>
<p>自底向上分析（Bottom-up Parsing）</p>
<p>从分析树的叶节点向根节点构造分析树</p>
<p>将一个串 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span> <font color="red">归约</font>为文法开始符号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span></p>
</li>
</ul>
<blockquote>
<p>最高效的自顶向下和自底向上方法 <strong>只能处理某些文法子类</strong> ，但是其中的某些子类，特别是 LL 和 LR 文法，其表达能力 <strong>足以描述现代程序设计语言的大部分语法构造</strong>。</p>
</blockquote>
<h2 id="4-1-自顶向下分析">4.1 自顶向下分析</h2>
<p>从分析树的顶部（根节点）向底部（叶节点）⽅向构造分析树。<br>
可以看成是从⽂法开始符号 S 推导出词串 w 的过程。</p>
<h3 id="4-1-1-font-color-green-size-5-b-最左推导-left-most-derivation-b-font">4.1.1 <font color="green" size="5"><b>最左推导（Left-most Derivation）</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507135711599.png" class title="image-20230507135711599">
<h3 id="4-1-2-font-color-green-size-5-b-最右推导-right-most-derivation-b-font">4.1.2 <font color="green" size="5"><b>最右推导（Right-most Derivation）</b></font></h3>
<p><font color="red">最右句型也称规范句型。</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507135729317.png" class title="image-20230507135729317">
<blockquote>
<p>最左推导和最右推导具有唯一性。</p>
</blockquote>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507140342752.png" class title="image-20230507140342752">
<h3 id="4-1-3-font-color-green-size-5-b-自定向下语法分析的通用形式-b-font">4.1.3 <font color="green" size="5"><b>自定向下语法分析的通用形式</b></font></h3>
<p>递归下降分析（Recursive-Descent Parsing）</p>
<ul>
<li>由一组过程组成，每个过程对应文法的一个 <strong>非终结符</strong></li>
<li>从文法 <strong>开始符号S</strong> 对应的过程开始，其中 <strong>递归调用</strong> 文法中其他 <strong>非终结符</strong> 对应的过程。如果 S 对应过程体恰好扫描了 <strong>整个输入串</strong> ，则成功完成语法分析。</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507141444134.png" class title="image-20230507141444134">
<h3 id="4-1-4-font-color-green-size-5-b-自顶向下分析存在的问题-b-font">4.1.4 <font color="green" size="5"><b>自顶向下分析存在的问题</b></font></h3>
<ol>
<li>
<p>同一非终结符的多个候选式存在 <strong>共同前缀</strong> ，将导致 <strong>回溯</strong> 现象</p>
<blockquote>
<p>因为有相同前缀时机器不知道如何选择，只能逐个尝试，试错了就要回溯。</p>
</blockquote>
<p>解决方法：提取左公因子</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308192117502.png" class title="image-20230308192117502">
</li>
<li>
<p>左递归文法会使递归下降分析器陷入无限循环</p>
<blockquote>
<p>左递归是在最左推导过程中，左边表达式的非终结符推出的右边表达式中最左侧还是自己。</p>
</blockquote>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><msup><mo>⇒</mo><mo>+</mo></msup><mi>A</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">A \Rightarrow ^+Aa</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel">⇒</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">a</span></span></span></span> <strong>左递归文法</strong></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>A</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">A \rightarrow Aa</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">a</span></span></span></span> <strong>直接左递归</strong></p>
<p>经过两步或者两步以上推导产生的左递归称为是 <strong>间接左递归</strong></p>
<p>解决方法：消除左递归</p>
</li>
</ol>
<p><font color="blue" size="5">①消除直接左递归</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507142758600.png" class title="image-20230507142758600">
<p><strong>消除直接左递归的一般形式：</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507143248297.png" class title="image-20230507143248297">
<p><font color="blue" size="5">②消除间接左递归</font></p>
<p>消除间接左递归的方法就是 <code>间接左递归-&gt;直接左递归-&gt;消除直接左递归</code></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308190818330.png" class title="image-20230308190818330">
<h2 id="4-2-预测分析法-predictive-parsing">4.2 预测分析法（Predictive Parsing）</h2>
<p><strong>预测分析</strong> 是 <strong>递归下降分析</strong> 技术的一个特例，同过在输入中向前看 <strong>固定个数</strong> （通常是一个） <strong>符号</strong> 来选择正确的 <code>A-产生式</code>。</p>
<blockquote>
<p>可对某些文法构造出向前看 k 个输入符号的预测分析器，该类文法有时也称为 <code>LL(k)</code> 文法类。</p>
</blockquote>
<p>预测分析 <strong>不需要回溯</strong> ，是一种 <strong>确定的</strong> 自顶向下分析方法。</p>
<h3 id="4-2-1-font-color-green-size-5-b-ll-1-文法-b-font">4.2.1 <font color="green" size="5"><b>LL(1) 文法</b></font></h3>
<p>我们先把 FIRST、FOLLOW、SELECT 集学完，最后看 LL(1) 文法。</p>
<blockquote>
<p>这部分 B站有个 up 讲的很好，我是跟着他学的：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Yr4y1m7PX/?spm_id_from=333.337.search-card.all.click&amp;vd_source=e7300d5accad8932a257efb8871bb9ee">https://www.bilibili.com/video/BV1Yr4y1m7PX/?spm_id_from=333.337.search-card.all.click&amp;vd_source=e7300d5accad8932a257efb8871bb9ee</a></p>
</blockquote>
<h4 id="s-文法">S_ 文法</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308192823911.png" class title="image-20230308192823911">
<p>抓住 <strong>确定性</strong> 就很好理解了。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308193148475.png" class title="image-20230308193148475">
<h4 id="first-集">FIRST 集</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308194447203.png" class title="image-20230308194447203">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308194725756.png" class title="image-20230308194725756">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308194849819.png" class title="image-20230308194849819">
<p><font color="red" size="5">FIRST 集的计算</font></p>
<p><strong>计算方法的关键：要推导的非终结符可以推导出的第一个终结符是什么？</strong></p>
<p>做几个例题：</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308212949856.png" class title="image-20230308212949856">
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>a</mi><mi>B</mi><mi mathvariant="normal">∣</mi><mi>ε</mi><mi mathvariant="normal">∣</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">A \rightarrow aB|\varepsilon | c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord">∣</span><span class="mord mathdefault">ε</span><span class="mord">∣</span><span class="mord mathdefault">c</span></span></span></span> 结果是 A 可推导出的第一个终结符</p>
<p>答案是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>a</mi><mo separator="true">,</mo><mi>ε</mi><mo separator="true">,</mo><mi>c</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{a, \varepsilon, c\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">ε</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mclose">}</span></span></span></span></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308213218659.png" class title="image-20230308213218659">
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>b</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">A \rightarrow ba</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span></span></span></span></p>
<p>答案是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>b</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{b\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">b</span><span class="mclose">}</span></span></span></span></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308213312289.png" class title="image-20230308213312289">
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>b</mi><mi>c</mi><mi mathvariant="normal">∣</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">A \rightarrow bc | c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">c</span><span class="mord">∣</span><span class="mord mathdefault">c</span></span></span></span></p>
<p>答案是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>b</mi><mo separator="true">,</mo><mi>c</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{b, c\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mclose">}</span></span></span></span></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308213420248.png" class title="image-20230308213420248">
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>b</mi><mi>c</mi><mi mathvariant="normal">∣</mi><mi>b</mi><mi mathvariant="normal">∣</mi><mi>c</mi><mi mathvariant="normal">∣</mi><mi>ε</mi></mrow><annotation encoding="application/x-tex">A \rightarrow bc | b | c | \varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">c</span><span class="mord">∣</span><span class="mord mathdefault">b</span><span class="mord">∣</span><span class="mord mathdefault">c</span><span class="mord">∣</span><span class="mord mathdefault">ε</span></span></span></span></p>
<p>答案是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>b</mi><mo separator="true">,</mo><mi>c</mi><mo separator="true">,</mo><mi>ε</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{b,c,\varepsilon\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">ε</span><span class="mclose">}</span></span></span></span></p>
<h4 id="follow-a-集">FOLLOW(A) 集</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308193517967.png" class title="image-20230308193517967">
<p><font color="red" size="5">FOLLOW(A) 的求法</font></p>
<p>计算过程遵照如下三条规则：</p>
<ol>
<li>先看开始符号，则将结束符 <code>$</code> 添加到 <code>Follow(A)</code> 中 （有的教材将<code>$</code>写做<code>#</code>）</li>
<li>右边 A 后面有东西（该东西不能==&gt; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>）, <code>First(东西)</code> 加入 <code>Follow(A)</code> ，把  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> 扣除（因为有ε说明按照推出ε的路径下去，推到 <code>$</code> 了，而终结符可以通过产生式左端或者左边的Follow集得到，不用单独考虑）</li>
<li>右边 A 后面没有东西（或者右边的非终结符推出ε了），<code>Follow(产生式左边)</code> 加入 <code>Follow(A)</code></li>
</ol>
<blockquote>
<p>求Follow集不需要超前的往后推导，自己右边没有东西或者推出ε了没关系，从产生式左端或者左边的Follow集找答案就好，一次找不到，不停的循环迭代答案，每次都更完整一些，最后一定可以得到正确的、完整的Follow集。</p>
</blockquote>
<p><strong>先看一个例题：</strong></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308210923941.png" class title="image-20230308210923941">
<p>首先求 <code>First</code> 集，按照前面的方法求：</p>
<table>
<thead>
<tr>
<th>A</th>
<th>推导式</th>
<th>First(A)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>E</code></td>
<td><code>E-&gt;TE-&gt;FT'E-&gt;PF'T'E</code> <code>P-&gt;(E)|a|b|^</code></td>
<td><code>&#123;(,a,b,^&#125;</code></td>
</tr>
<tr>
<td><code>E'</code></td>
<td><code>E'-&gt;+E|</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span></td>
<td><code>&#123;+, </code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> <code>&#125;</code></td>
</tr>
<tr>
<td><code>T</code></td>
<td><code>T-&gt;FT'-&gt;PF'T'</code> <code>P-&gt;(E)|a|b|^</code></td>
<td><code>&#123;(,a,b,^&#125;</code></td>
</tr>
<tr>
<td><code>T'</code></td>
<td><code>T'-&gt;T|</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span></td>
<td><code>First(T)</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋃</mo></mrow><annotation encoding="application/x-tex">\bigcup</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⋃</span></span></span></span>  {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span>} =  <code>&#123;(,a,b,^,</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> <code>&#125;</code></td>
</tr>
<tr>
<td><code>F</code></td>
<td><code>F-&gt;PF'</code></td>
<td><code>First(P)</code> = <code>&#123;(,a,b,^&#125;</code></td>
</tr>
<tr>
<td><code>F'</code></td>
<td><code>F'-&gt;*F'|</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span></td>
<td><code>&#123;*, </code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> <code>&#125;</code></td>
</tr>
<tr>
<td><code>P</code></td>
<td><code>P-&gt;(E)|a|b|^</code></td>
<td><code>&#123;(,a,b,^&#125;</code></td>
</tr>
</tbody>
</table>
<p>求出 First 集后，再求 Follow 集：</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507161106476.png" class title="image-20230507161106476">
<table>
<thead>
<tr>
<th>A</th>
<th>First(A)</th>
<th>中间过程（在右边找A）</th>
<th>使用的规则</th>
<th>Follow(A)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>E</code></td>
<td><code>&#123;(,a,b,^&#125;</code></td>
<td><code>E'-&gt;+E|</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> <br><code>P-&gt;(E)|a|b|^</code></td>
<td>1:<code>#加入</code><br>3:<code>Follow(E')加入Follow(E)</code> <br>2:<code>&#123; ) &#125;加入Follow(E)</code></td>
<td><code>&#123; #, Follow(E'), ) &#125;</code> = <code>&#123; #, ) &#125;</code></td>
</tr>
<tr>
<td><code>E'</code></td>
<td><code>&#123;+, </code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> <code>&#125;</code></td>
<td><code>E-&gt;TE'</code></td>
<td>3: <code>Follow(E)加入Follow(E')</code></td>
<td><code>&#123; Follow(E) &#125;</code> = <code>&#123; #, ) &#125;</code></td>
</tr>
<tr>
<td><code>T</code></td>
<td><code>&#123;(,a,b,^&#125;</code></td>
<td><code>E-&gt;TE'</code><br><code>T'-&gt;T|</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span></td>
<td>2(<code>E'-&gt;+E</code>):<code>First(E')去掉</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> <code>加入Follow(E)</code><br>3:<code>Follow(T')加入Follow(T)</code><br>3:<code>E'-&gt;</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> 时 <code>Follow(E)加入Follow(T)</code></td>
<td><code>&#123; +, Follow(T'), Follow(E) &#125;</code> = <br><code>&#123; +, #, ) &#125;</code></td>
</tr>
<tr>
<td><code>T'</code></td>
<td><code>&#123;(,a,b,^,</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> <code>&#125;</code></td>
<td><code>T-&gt;FT'</code></td>
<td>3:<code>Follow(T)加入Follow(T')</code></td>
<td><code>&#123; Follow(T) &#125;</code> = <code>&#123; +, #, ) &#125;</code></td>
</tr>
<tr>
<td><code>F</code></td>
<td><code>&#123;(,a,b,^&#125;</code></td>
<td><code>T-&gt;FT'</code></td>
<td>2<code>(T'-&gt;T)</code>:<code>First(T')去掉</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> <code>加入Follow(F)</code><br>3:<code>T'-&gt;</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> 时 <code>Follow(T)加入Follow(F)</code></td>
<td><code>&#123; (, a, b, ^, +, #, ) &#125;</code></td>
</tr>
<tr>
<td><code>F'</code></td>
<td><code>&#123;*, </code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> <code>&#125;</code></td>
<td><code>F-&gt;PF'</code><br><code>F'-&gt;*F'|</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span></td>
<td>3:<code>Follow(F)加入Follow(F')</code><br>3:<code>Follow(F')加入Follow(F')</code></td>
<td><code>&#123; (, a, b, ^, +, #, ) &#125;</code></td>
</tr>
<tr>
<td><code>P</code></td>
<td><code>&#123;(,a,b,^&#125;</code></td>
<td><code>F-&gt;PF'</code></td>
<td>2: <code>First(F')去掉</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> <code>加入Follow(P)</code><br>3:<code>F'-&gt;</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> 时 <code>Follow(F')加入Follow(P)</code></td>
<td><code>&#123; *, (, a, b, ^, +, #, ) &#125;</code></td>
</tr>
</tbody>
</table>
<p>最终结果如下：</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308211551714.png" class title="image-20230308211551714">
<p>再看一个例题：同上</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308212615896.png" class title="image-20230308212615896">
<h4 id="select-集">SELECT 集</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308194038743.png" class title="image-20230308194038743">
<p><font color="red" size="5">Select 集计算：</font></p>
<p>先计算 First 集和 FOLLOW 集，然后将对每个表达式文法各产生式求 SELECT 集，规则如下：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507163230364.png" class title="image-20230507163230364">
<blockquote>
<p>注意：SELECT集不包含 ε 。</p>
</blockquote>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308230859286.png" class title="image-20230308230859286">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308230942553.png" class title="image-20230308230942553">
<h4 id="q-文法">q_ 文法</h4>
<p>q_ 文法在 s_ 文法的基础上，要求放宽了一点，右部可以出现 ε 了。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308202542458.png" class title="image-20230308202542458">
<h4 id="预测分析表">预测分析表</h4>
<p><font color="blue" size="5">得到可以通过 SELECT 集得到预测分析表</font></p>
<p>预测分析表用于预测对某个输入符号，可能的产生式。</p>
<p>有了预测分析表，机器就可以根据输入符号，通过查表得方式判断用哪个产生式来解释。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308231554021.png" class title="image-20230308231554021">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230308232213075.png" class title="image-20230308232213075">
<h4 id="ll-1-文法">LL(1)文法</h4>
<blockquote>
<p>简单的说 LL(1) 文法是能够通过输入的这一个字符 <strong>唯一确定</strong> 下一步选择哪个产生式的文法。</p>
</blockquote>
<p>根据 LL(1) 文法的定义来判断一个文法是不是 LL(1) 文法，分三步走：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507163716007.png" class title="image-20230507163716007">
<p>起始上面这三条约束都是为了让机器在做选择的时候有确定的答案。</p>
<p><strong>光看文字有点麻，看一道例题理解一下：</strong></p>
<blockquote>
<p>判断下述文法是否是 LL(1) 文法：</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>→</mo><mi>a</mi><mi>A</mi><mi>S</mi><mi mathvariant="normal">∣</mi><mi>b</mi></mrow><annotation encoding="application/x-tex">S \rightarrow aAS | b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord">∣</span><span class="mord mathdefault">b</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>b</mi><mi>A</mi><mi mathvariant="normal">∣</mi><mi>ε</mi></mrow><annotation encoding="application/x-tex">A \rightarrow bA | \varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">A</span><span class="mord">∣</span><span class="mord mathdefault">ε</span></span></span></span></p>
</blockquote>
<p><strong>解：</strong> 按照 LL(1) 文法的定义来判断：</p>
<ol>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>a</mi><mi>A</mi><mi>S</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>a</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">First(aAS) = \{a\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">a</span><span class="mclose">}</span></span></span></span>   <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>b</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">First(b) = \{b\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">b</span><span class="mclose">}</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>b</mi><mi>A</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>b</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">First(bA) = \{b\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">b</span><span class="mclose">}</span></span></span></span>    <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>ε</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>ε</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">First(\varepsilon) = \{ \varepsilon \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">ε</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">ε</span><span class="mclose">}</span></span></span></span></p>
<p>可以看到相同左部推不出相同终结符开头的串，满足条件（1）</p>
</li>
<li>
<p>对于相同左部的表达式，至多只有一个右部能推出 ε，满足条件（2）</p>
</li>
<li>
<p>因为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi><mo>∈</mo><mi>F</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>A</mi><mo>→</mo><mi>ε</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\varepsilon \in First(A \rightarrow \varepsilon)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">ε</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">ε</span><span class="mclose">)</span></span></span></span> 下面判断 A 是否满足条件 (3)</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>o</mi><mi>l</mi><mi>l</mi><mi>o</mi><mi>w</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mo>=</mo><mi>F</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">Follow(A) = First(S) = \{a, b\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mclose">}</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>o</mi><mi>l</mi><mi>l</mi><mi>o</mi><mi>w</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mo>∩</mo><mi>F</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>b</mi><mi>A</mi><mo stretchy="false">)</mo><mo mathvariant="normal">≠</mo><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">Follow(A) \cap First(bA) \neq \phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span></span></span></span></p>
<p>不满足条件(3)，则不是 LL(1) 文法。</p>
</li>
</ol>
<h3 id="4-2-2-font-color-green-size-5-b-递归的预测分析法-b-font">4.2.2 <font color="green" size="5"><b>递归的预测分析法</b></font></h3>
<p><font color="blue" size="4">实现预测分析的方法：</font></p>
<ul>
<li>递归的方式：基于 <strong>预测分析表</strong> 对 <strong>递归下降分析法</strong> 进行扩展</li>
<li>非递归的方式： <strong>显式地</strong> 维护一个 <strong>栈</strong> 结构来模拟 <strong>最左推导</strong> 过程</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507165542006.png" class title="image-20230507165542006">
<p><strong>举个例子：</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507172240584.png" class title="image-20230507172240584">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230309215120587.png" class title="image-20230309215120587">
<p>当表达式右部推导出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span> 时，判断 TOKEN 是否等于其该表达式的 SELECT 集。</p>
<p>根据预测分析表为每一个非终结符编写一个过程。</p>
<h3 id="4-2-3-font-color-green-size-5-b-非递归的预测分析法-b-font">4.2.3 <font color="green" size="5"><b>非递归的预测分析法</b></font></h3>
<p>非递归的预测分析显式地维护一个栈结构，而不是通过递归调用地方式隐式地维护栈。这样地语法分析器可以模拟 <strong>最左推导</strong> 过程。</p>
<p>这里维护栈实现了一个下推自动机（以匹配 a 串后面的 b 串的数量为例，即遇到 a 压栈，遇到 b 弹栈）。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230309215633966.png" class title="image-20230309215633966">
<p><font color="blue" size="4">表驱动的预测分析法</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230309215944684.png" class title="image-20230309215944684">
<p><font color="green" size="4">下面看一个例子：</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230309220220867.png" class title="image-20230309220220867">
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230309220304707.png" class title="image-20230309220304707">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230309220445183.png" class title="image-20230309220445183">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230309220540325.png" class title="image-20230309220540325">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230309220711857.png" class title="image-20230309220711857">
<p>后面同理，利用这种方式模拟，根据输入去预测表中选择产生式，当栈顶为终结符时，与剩余输入的第一个字符匹配，如果相等，则读出字符并将栈顶弹出。</p>
<p><font color="blue" size="5">递归预测 vs. 非递归预测</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230309220940712.png" class title="image-20230309220940712">
<p><font color="blue" size="5">预测分析法实现步骤</font></p>
<ol>
<li>构造文法</li>
<li>改造文法：消除二义性、消除左递归、消除回溯</li>
<li>求每个变量的 FIRST 集和 FOLLOW 集，从而求得每个候选式的 SELECT 集。</li>
<li>检查是不是 LL(1) 文法(<font color="red">确定性</font>)。若是，构造预测分析表。</li>
<li>对于 <strong>递归预测分析</strong> ，根据预测分析表为每一个非终结符编写一个过程；对于 <strong>非递归预测分析</strong> ，实现表驱动的预测分析算法。</li>
</ol>
<h3 id="4-2-4-font-color-green-size-5-b-预测分析中的错误恢复-b-font">4.2.4 <font color="green" size="5"><b>预测分析中的错误恢复</b></font></h3>
<p><font color="blue" size="5">1. 错误检测</font></p>
<p><strong>下面两种情况可以检测到错误：</strong></p>
<ol>
<li>栈顶的 <strong>终结符</strong> 和当前 <strong>输入符号</strong> 不匹配</li>
<li>栈顶的 <strong>非终结符</strong> 与当前 <strong>输入符号</strong> 再预测分析表对应项中的信息为空</li>
</ol>
<p><font color="blue" size="5">2. 错误恢复</font></p>
<p><strong>恐慌模式（Panic Mode）：</strong></p>
<ul>
<li>
<p>忽略输入中的一些符号，如果对应预测分析表中的“空”，则忽略该输入符号；</p>
</li>
<li>
<p>直到输入中出现由设计者选定的 <strong>同步词法单元（synchronizing token）集合</strong> 中的某个词法单元，弹出栈顶非终结符</p>
<blockquote>
<p>同步词法单元集合，即对应非终结符的FOLLOW集。预测表中查到synch，则栈中弹出该非终结符。</p>
<p>因为该非终结符之后就应该出现其FOLLOW集中的内容，但是预测表中没有，就说明这一步可能是该非终结符整错了，弹掉它。</p>
</blockquote>
</li>
</ul>
<p><strong>下面看一个例子：</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230309230742872.png" class title="image-20230309230742872">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230309231438569.png" class title="image-20230309231438569">
<h2 id="4-3-自底向上的分析">4.3 自底向上的分析</h2>
<p>从分析树的底部(叶节点)向顶部(根节点)方向构造分析树， <strong>可以看成是将输入串w归约为文法开始符号S的过程</strong> 。</p>
<ul>
<li>自顶向下的语法分析采用最左推导方式（构造句子的最左推导）</li>
<li>自底向上的语法分析采用最左归约方式（反向构造句子的最右推导）</li>
</ul>
<p><strong>自底向上语法分析的通用框架：</strong> <font color="blue">移入-归约分析(Shift-Reduce Parsing)</font></p>
<h3 id="4-3-0-font-color-green-size-5-b-句型-短语-简单短语-句柄-b-font">4.3.0 <font color="green" size="5"><b>句型、短语、简单短语、句柄</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230510085108580.png" class title="image-20230510085108580">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230510085122111.png" class title="image-20230510085122111">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230510085133237.png" class title="image-20230510085133237">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230510085143869.png" class title="image-20230510085143869">
<p>看下面这张图更好理解关于子树的划分：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230510085353865.png" class title="image-20230510085353865">
<h3 id="4-3-1-font-color-green-size-5-b-移入-归约分析-b-font">4.3.1 <font color="green" size="5"><b>移入-归约分析</b></font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319182301573.png" class title="image-20230319182301573">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319182517381.png" class title="image-20230319182517381">
<p><font color="brown" size="4">每次归约的符号串称为“句柄”。</font></p>
<p>语法分析器不断地重复这个循环，直到它检测到一个语法错误，或者栈中包含了开始符号且输入缓冲区为空（当进入这样的格局时，语法分析器停止运行，并宣称成功完成了语法分析）为止.</p>
<h3 id="4-3-2-font-color-green-size-5-b-移入-归约分析中存在的问题-b-font">4.3.2 <font color="green" size="5"><b>移入-归约分析中存在的问题</b></font></h3>
<h4 id="1-归约-归约冲突">1. 归约-归约冲突</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319183530149.png" class title="image-20230319183530149">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319183556594.png" class title="image-20230319183556594">
<h4 id="2-移入归约冲突">2. 移入归约冲突</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319183723873.png" class title="image-20230319183723873">
<h2 id="4-4-lr-分析法">4.4 LR 分析法</h2>
<p><strong>LR文法</strong> (Knuth, 1963) 是最大的、可以 <strong>构造</strong> 出相应 <strong>移入-归约语法分析器</strong> 的文法类</p>
<ul>
<li>L: 对输入进行从左到右的扫描</li>
<li>R: 反向构造出一个最右推导序列</li>
</ul>
<p><strong>LR(k)分析：</strong> （决定是否归约时）需要向前查看k个输入符号的LR分析</p>
<blockquote>
<p>k = 0 和 k = 1 这两种情况具有实践意义<br>
当省略(k)时，表示k =1</p>
</blockquote>
<h3 id="4-4-1-font-color-blue-size-5-lr-分析法的基本原理-font">4.4.1 <font color="blue" size="5">LR 分析法的基本原理</font></h3>
<p><strong>自底向上分析的关键问题是什么？</strong><br>
如何正确地识别句柄<br>
<strong>句柄是逐步形成的，用“状态”表示句柄识别的进展程度：</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319184730611.png" class title="image-20230319184730611">
<h3 id="4-4-2-font-color-blue-size-5-lr-分析器-自动机-的总体结构-font">4.4.2 <font color="blue" size="5">LR 分析器（自动机）的总体结构</font></h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319185333506.png" class title="image-20230319185333506">
<h3 id="4-4-3-font-color-blue-size-5-lr-分析器工作过程-font">4.4.3 <font color="blue" size="5">LR 分析器工作过程</font></h3>
<p><strong>动图演示如下：</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/LR.gif" class title="LR">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319191026750.png" class title="image-20230319191026750">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319191153304.png" class title="image-20230319191153304">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319191206771.png" class title="image-20230319191206771">
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">令a为w$的第一个符号；</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123; <span class="comment">/* 永远重复*/</span> </span><br><span class="line">    令s是栈顶的状态；</span><br><span class="line">    <span class="keyword">if</span> ( ACTION [s，a] = st ) &#123;</span><br><span class="line">        将t压入栈中；</span><br><span class="line">        令a为下一个输入符号；</span><br><span class="line">    &#125; <span class="keyword">else</span>  <span class="keyword">if</span> (ACTION [s，a] =归约A → β ) &#123;</span><br><span class="line">        从栈中弹出│ β │个符号；</span><br><span class="line">        将GOTO [t，A]压入栈中；</span><br><span class="line">        输出产生式 A → β ；</span><br><span class="line">    &#125; <span class="keyword">else</span>  <span class="keyword">if</span> (ACTION [s，a] =接受) <span class="keyword">break</span>； <span class="comment">/* 语法分析完成*/</span></span><br><span class="line">    <span class="keyword">else</span>调用错误恢复例程； </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-4-4-构造给定文法的-lr-分析表">4.4.4 构造给定文法的 LR 分析表</h3>
<h4 id="1-lr-0-分析">1. LR(0)分析</h4>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319202627093.png" class title="image-20230319202627093">
<p><font color="blue" size="5">增广文法（Augmented Grammar）</font></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319202951680.png" class title="image-20230319202951680">
<p><font color="blue" size="5">文法中的项目</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507212326905.png" class title="image-20230507212326905">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319203406677.png" class title="image-20230319203406677">
<p>上面15个项目中，有些项目是等价的。<strong>可以把等价的项目组成一个项目集（I），称为<font color="red">项目集闭包</font>（Closure of Item Sets），每个项目集闭包对应着自动机的一个状态。</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319211120284.png" class title="image-20230319211120284">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319212043951.png" class title="image-20230319212043951">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/LR%EF%BC%880%EF%BC%89.gif" class title="LR（0）">
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319212747199.png" class title="image-20230319212747199">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319213545454.png" class title="image-20230319213545454">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319213602096.png" class title="image-20230319213602096">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319213726634.png" class title="image-20230319213726634">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507214332548.png" class title="image-20230507214332548">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507215449264.png" class title="image-20230507215449264">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319215014341.png" class title="image-20230319215014341">
<h5 id="font-size-5-lr-0-分析过程中的冲突-font"><font size="5">LR(0)分析过程中的冲突</font></h5>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319221542300.png" class title="image-20230319221542300">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230319221744128.png" class title="image-20230319221744128">
<p><strong>从上图可以看出，标红的状态既可以移入也可以归约。那么此时遇到*是移进呢？还是归约呢？</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507220332714.png" class title="image-20230507220332714">
<h4 id="2-slr分析">2. SLR分析</h4>
<p><strong>LR(0)考虑了A的上文（规范句型的前缀），但未考虑A的下文，因此消解冲突能力有限。</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507231921942.png" class title="image-20230507231921942">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507231950981.png" class title="image-20230507231950981">
<p>用 SLR 来分析上面这个例子，分析的方法如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507232805866.png" class title="image-20230507232805866">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230510141358810.png" class title="image-20230510141358810"> 
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230320103816533.png" class title="image-20230320103816533">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507232903476.png" class title="image-20230507232903476">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507233748444.png" class title="image-20230507233748444">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507233800355.png" class title="image-20230507233800355">
<p><font color="blue" size="5">SLR 分析表构造算法</font></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507234019569.png" class title="image-20230507234019569">
<p><strong>可惜，SLR分析也有冲突。</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507234146307.png" class title="image-20230507234146307">
<h4 id="3-lr-1-分析">3. LR(1)分析</h4>
<p>关于LR(1)的后继符号/前向搜索符，这个<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Vm4y1Q7XB/?spm_id_from=333.788&amp;vd_source=e7300d5accad8932a257efb8871bb9ee">阿婆主</a>讲的真的非常棒！</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230510203256984.png" class title="image-20230510203256984">
<p>SLR 分析存在的问题：<br>
SLR 只是简单地考察下一个输入符号 b 是否属于与归约项目 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>α</mi></mrow><annotation encoding="application/x-tex">A→α</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span> 相关联的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>O</mi><mi>L</mi><mi>L</mi><mi>O</mi><mi>W</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">FOLLOW(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault">L</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mclose">)</span></span></span></span>，但 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo>∈</mo><mi>F</mi><mi>O</mi><mi>L</mi><mi>L</mi><mi>O</mi><mi>W</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">b∈FOLLOW(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault">L</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mclose">)</span></span></span></span> 只是归约 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">α</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span> 的一个必要条件，而非充分条件。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507234356242.png" class title="image-20230507234356242">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507234849994.png" class title="image-20230507234849994">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507234904453.png" class title="image-20230507234904453">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230507235012699.png" class title="image-20230507235012699">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508001355263.png" class title="image-20230508001355263">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508000218875.png" class title="image-20230508000218875">
<p><font size="5">同一状态下，合并项目集中可合并的部分</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508000458497.png" class title="image-20230508000458497">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508000544893.png" class title="image-20230508000544893">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508000752257.png" class title="image-20230508000752257">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508000900518.png" class title="image-20230508000900518">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508000938506.png" class title="image-20230508000938506">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508001031640.png" class title="image-20230508001031640">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508001233034.png" class title="image-20230508001233034">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508001302613.png" class title="image-20230508001302613">
<p><font color="blue" size="4">各种LR分析表构造方法的不同之处在于归约项目的处理上</font></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230320112030115.png" class title="image-20230320112030115">
<h4 id="4-lalr-lookahead-lr-分析">4. LALR（lookahead-LR）分析</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230320112856534.png" class title="image-20230320112856534">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230320112917473.png" class title="image-20230320112917473">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508074308219.png" class title="image-20230508074308219">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230320112937640.png" class title="image-20230320112937640">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508082223321.png" class title="image-20230508082223321">
<blockquote>
<p>为什么说合并同心项目时不会产生 <strong>移进-归约</strong> 冲突？</p>
</blockquote>
<p>因为合并同心项目集其实是合并相同项目的后继符号，这样移进项目的移进字符一定是相同的，所以只可能有 <strong>归约-归约</strong> 冲突，而不会发生 <strong>移进-归约</strong> 冲突。</p>
<p>合并同心项的时候如果看不出来，可以按照下面的方法，先合并项目相同的各集合，利用LR(1)的预测分析表生成LALR的预测分析表，即通过LR(1)模拟过程，向状态合并后的新表中添加状态。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230510211243458.png" class title="image-20230510211243458">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508082910454.png" class title="image-20230508082910454">
<blockquote>
<p>为什么说合并同心项会延迟错误发现呢？</p>
</blockquote>
<p>可以看出当输入 <code>d$</code> 时，如果没有合并 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mn>4</mn></msub><mo separator="true">,</mo><msub><mi>I</mi><mn>9</mn></msub></mrow><annotation encoding="application/x-tex">I_4,I_9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的同心项，经过 <code>I0-&gt;I4</code> 就能发现错误。</p>
<p>但是合并同心项后，需要经过 <code>I0-&gt;I4-&gt;I0-&gt;I2</code> 才能发现错误，这延迟了两步。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508083635561.png" class title="image-20230508083635561">
<h4 id="5-二义性文法">5. 二义性文法</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508083719642.png" class title="image-20230508083719642">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508083741451.png" class title="image-20230508083741451">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508083840325.png" class title="image-20230508083840325">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508083806057.png" class title="image-20230508083806057">
<p>再看一个例子：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508083955069.png" class title="image-20230508083955069">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508084011479.png" class title="image-20230508084011479">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508084035462.png" class title="image-20230508084035462">
<p><font color="blue" size="5">二义性文法的使用</font></p>
<p>应该保守地使用二义性文法，并且必须在严格控制之下使用，因为稍有不慎就会导致语法分析器所识别的语言出现偏差。</p>
<h4 id="6-lr分析中的错误处理">6. LR分析中的错误处理</h4>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508084205756.png" class title="image-20230508084205756">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508084229744.png" class title="image-20230508084229744">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508084258470.png" class title="image-20230508084258470">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508084324199.png" class title="image-20230508084324199">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508084328255.png" class title="image-20230508084328255">
<h2 id="4-5-算符优先分析法">4.5 算符优先分析法</h2>
<p>略。</p>
<h2 id="4-6-语法分析器自动生成工具">4.6 语法分析器自动生成工具</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508091625135.png" class title="image-20230508091625135">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508091635350.png" class title="image-20230508091635350">
<h1>第5章 语法制导翻译</h1>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230331204710331.png" class title="image-20230331204710331">
<p><font color="blue" size="4">语法制导翻译的基本思想</font></p>
<ul>
<li>如何表示语义信息</li>
</ul>
<p>为 CFG 中的文法符号设置语义属性，用来表示语法成分对应的语义信息。</p>
<ul>
<li>如何计算语义属性</li>
</ul>
<p>文法符号的语义属性值是用与文法符号所在产生式（语法规则）相关联得语义规则来计算的。</p>
<p>对于给定的输入串 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span> ，构建 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span> 的语法分析树，并利用与产生式（语法规则）相关联的语义规则来计算分析树中各结点对应的语义属性值。</p>
<p><font color="blue" size="4">将 语义规则 同 语法规则（产生式） 联系起来要涉及两个概念</font></p>
<ul>
<li>
<p><strong>语法制导定义（Syntax-Directed Definitions, SDD）</strong></p>
<ul>
<li>SDD 是对 CFG 的推广</li>
<li>将每个 <strong>文法符号</strong> 和一个 <strong>语义属性</strong> 集合相关联</li>
<li>将每个 <strong>产生式</strong> 和一组 <strong>语义规则</strong> 相关联，这些规则用于计算该产生式中各文法符号的属性值。</li>
</ul>
<p>例：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401124919027.png" class title="image-20230401124919027"></p>
</li>
<li>
<p><strong>语法制导翻译（Syntax-Directed Translation Scheme, SDT）</strong></p>
<ul>
<li>SDT 是在产生式右部嵌入了程序片段的 CFG ，这些 <strong>程序片段</strong> 称为 <strong>语义动作</strong> 。按照惯例，语义动作放在花括号内。</li>
<li>一个语义动作在产生式中的位置决定了这个动作的执行时间。</li>
</ul>
<p>例：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401125323130.png" class title="image-20230401125323130"></p>
</li>
</ul>
<p><font color="blue" size="4">SDD</font></p>
<ul>
<li>是关于语言翻译的高层次规格说明</li>
<li>隐藏了许多具体实现细节，使用户不必显式地说明翻译发生地顺序</li>
</ul>
<p><font color="blue" size="4">SDT</font></p>
<ul>
<li>可以看作对 SDD 的一种补充，是 SDD 的具体实施方案</li>
<li>显式地指明了语义规则地计算顺序，以便说明某些实现细节</li>
</ul>
<h2 id="5-1-语法制导定义-sdd">5.1 语法制导定义 SDD</h2>
<ul>
<li>
<p>语法制导定义 SDD 是对 CFG 的推广</p>
<ul>
<li>
<p>将每个 <strong>文法符号</strong> 和一个 <strong>语义属性</strong> 集合相关联</p>
<p>语义属性就是结构体成员。</p>
</li>
<li>
<p>将每个 <strong>产生式</strong> 和一组 <strong>语义规则</strong> 相关联，用来计算该产生式中各文法符号的属性值</p>
<p>语义规则就是待执行的函数语句。</p>
</li>
</ul>
</li>
<li>
<p>文法符号的属性</p>
<ul>
<li>
<p>综合属性（synthesized attribute）</p>
<ul>
<li>在分析树节点 N 上的<font color="red">非终结符</font> A 的 <strong>综合属性</strong> 只能通过<font color="blue">N的子节点</font>或<font color="blue">N本身</font>的属性值来定义</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401131734493.png" class title="image-20230401131734493">
<ul>
<li><font color="red">终结符</font>可以具有综合属性。不过其值是由词法分析器提供的词法值，因此在 SDD 中没有计算终结符属性值的语义规则。</li>
</ul>
</li>
<li>
<p>继承属性（inherited attribute）</p>
<ul>
<li>在分析树节点 N 上的<font color="red">非终结符</font> A 的继承属性只能通过<font color="blue">N 的父节点</font>、<font color="blue">N 的兄弟节点</font>或<font color="blue">N 本身</font>的属性值来定义。</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401132224611.png" class title="image-20230401132224611">
<ul>
<li><font color="red">终结符</font>没有继承属性。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>看三个例子</strong> ：</p>
<ul>
<li>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508125055486.png" class title="image-20230508125055486">
</li>
<li>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508130021330.png" class title="image-20230508130021330">
</li>
<li>
<p>一个没有副作用的 SDD 有时也称为 <font color="red">属性文法</font></p>
<ul>
<li><strong>属性文法的规则</strong>：仅仅通过其他属性值和常量来定义一个属性值</li>
</ul>
<p>例：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401135021880.png" class title="image-20230401135021880"></p>
</li>
</ul>
</li>
<li>
<p><strong>SDD 求值顺序</strong></p>
<ul>
<li>SDD 为 CFG 中的文法符号设置<font color="blue">语义属性</font>。对于给定的输入串 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span> ，应用<font color="blue">语义规则</font>计算分析树中各个节点对应的属性值</li>
<li>语义规则建立了<font color="blue">属性之间的依赖关系</font>，在对语法分析树节点的一个属性求值之前，必须首先求出这个属性值<font color="blue">所依赖的所有属性值</font></li>
</ul>
</li>
<li>
<p><strong>依赖图（Dependency Graph）</strong></p>
<ul>
<li>依赖图描述了分析树中节点属性间依赖关系的有向图。如果属性 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mi mathvariant="normal">.</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">X.a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mord">.</span><span class="mord mathdefault">a</span></span></span></span> 的值依赖于属性 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mi mathvariant="normal">.</mi><mi>b</mi></mrow><annotation encoding="application/x-tex">Y.b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mord">.</span><span class="mord mathdefault">b</span></span></span></span> 的值，则依赖图中有一条从 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mi mathvariant="normal">.</mi><mi>b</mi></mrow><annotation encoding="application/x-tex">Y.b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mord">.</span><span class="mord mathdefault">b</span></span></span></span> 的节点指向 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mi mathvariant="normal">.</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">X.a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mord">.</span><span class="mord mathdefault">a</span></span></span></span> 的节点的有向边。</li>
</ul>
<p>例：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401151618293.png" class title="image-20230401151618293"></p>
<ul>
<li>属性值计算的顺序可以使用<font color="red">拓扑排序（topological sort）</font>来表示。</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401152334334.png" class title="image-20230401152334334">
<ul>
<li>
<p>对于只具有综合属性的 SDD ，可以按照任何自底向上的顺序计算它们的值。</p>
</li>
<li>
<p>对于同时具有继承属性和综合属性的 SDD，不能保证存在一个顺序来对各个节点上的属性进行求值：</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401152946056.png" class title="image-20230401152946056">
</li>
</ul>
</li>
</ul>
<blockquote>
<p>从计算的角度看，给定一个 SDD ，很难确定是否存在某棵语法分析树，使得 SDD 的属性之间存在循环依赖关系。</p>
<p>不过，一定存在一个 SDD 的有用子类，它们能够保证对每棵语法分析树都存在一个求值顺序，因为它们不允许产生带有环的依赖图。</p>
</blockquote>
<h2 id="5-2-s-属性定义与l-属性定义">5.2 S-属性定义与L-属性定义</h2>
<p>这两类 SDD 可以和<font color="blue">自顶向下</font>及<font color="blue">自底向上</font>的语法分析过程一起高效地实现：</p>
<ul>
<li>
<p><font color="red">S-属性定义（S-Attributed Definitions, S-SDD）</font></p>
<p><strong>仅仅使用综合属性的 SDD 称为 S 属性的 SDD（S-属性定义/S-SDD）。</strong></p>
<ul>
<li>如果一个 SDD 是 S 属性的，可以按照语法分析树节点的任何<font color="blue">自底向上</font>顺序来计算她的各个属性值。</li>
<li>S-属性定义可以在<font color="blue">自底向上的语法分析</font>过程中实现。</li>
</ul>
</li>
<li>
<p><font color="red">L-属性定义（L-Attributed Definitions, L-SDD）</font></p>
<p><strong>一个 SDD 是 L-属性定义，当且仅当它的每个属性要么是一个综合属性，要么是满足如下条件的继承属性：假设存在一个产生式 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><msub><mi>X</mi><mn>1</mn></msub><msub><mi>X</mi><mn>2</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>X</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">A \rightarrow X_1X_2...X_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></strong>，其右边部符号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><mi>i</mi><mo>≤</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">X_i(1 \leq i \leq n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.79549em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span> 的继承属性仅依赖于下列属性 ：</p>
<ol>
<li>
<p>A 的继承属性（不能是 A 的综合属性，因为如下图，A 的综合属性可以来自子节点的综合属性和继承属性，如果子节点继承父节点的综合属性就会在依赖图中形成回路)</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401161831705.png" class title="image-20230401161831705">
</li>
<li>
<p>产生式中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">X_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 左边的符号的属性</p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">X_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 本身的属性，但 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">X_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的全部属性不能在依赖图中形成环路。</p>
</li>
</ol>
<blockquote>
<p>每个S-属性定义都是L-属性定义。</p>
</blockquote>
<p><strong>换句话说：在一个产生式所关联的各个属性之间，依赖图的边可以从左到右，但不能从右到左（因此称为L属性的，L是Left的首字母）。</strong></p>
<p><strong>称为L属性的 SDD （L-属性定义/L-SDD）</strong></p>
</li>
</ul>
<p><font color="blue" size="4">L-SDD 实例</font></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508132803721.png" class title="image-20230508132803721">
<h2 id="5-3-语法制导翻译方案-sdt">5.3 语法制导翻译方案 SDT</h2>
<p><strong>语法制导翻译方案（SDT）是在产生式右部中嵌入了程序片段（称为语义动作）的CFG</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508161727332.png" class title="image-20230508161727332">
<p><strong>SDT 可以看作是 SDD 的具体实施方案：</strong></p>
<ul>
<li>SDD 定义了各属性的计算方法（计算规则）			<font color="red">怎么算？</font></li>
<li>SDT 进一步明确了各属性的计算时机（计算顺序）<font color="red">怎么算？+ 何时算？</font></li>
</ul>
<p><strong>两类重要SDD的SDT实现，SDT可在语法分析过程中实现：</strong></p>
<ul>
<li>
<p><font color="green" size="4">基本文法可以使用 LR 分析技术，且 SDD 是 S 属性的</font></p>
<p><strong>将 S-SDD 转换为 SDT 的方法</strong>：将每个语义动作都放在产生式的最后。</p>
<p>例：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401164413180.png" class title="image-20230401164413180">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/L-SDD.gif" class title="L-SDD">
</li>
<li>
<p><font color="green" size="4">基本文法可以使用 LL 分析技术，且 SDD 是 L 属性的</font></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401172412557.png" class title="image-20230401172412557">
<p><strong>将 L-SDD 转换为 SDT 的规则</strong></p>
<ul>
<li>将计算一个产生式左部符号的<font color="blue">综合属性</font>的动作放置在这个产生式右部的<font color="blue">最右端</font></li>
<li>将计算某个非终结符 A 的<font color="blue">继承属性</font>的动作插入到产生式右部中<font color="blue">紧靠在 A 的本次出现之前</font>的位置上</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230401172807887.png" class title="image-20230401172807887">
<p><strong>如果一个 L-SDD 的基本文法可以使用 LL 分析技术，那么它的 SDT 可以在 LL 或 LR 语法分析过程中实现。例子如下：</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508162056892.png" class title="image-20230508162056892">
</li>
</ul>
<blockquote>
<p><strong>L-属性定义的SDT 实现</strong></p>
<p>如果一个L-SDD的基本文法可以使用LL分析技术，那么它的SDT可以在LL或LR语法分析过程中实现</p>
<ul>
<li>在非递归的预测分析过程中进行语义翻译</li>
<li>在递归的预测分析过程中进行语义翻译</li>
<li>在LR分析过程中进行语义翻译</li>
</ul>
</blockquote>
<h2 id="5-4-l-sdd-自顶向下翻译">5.4 L-SDD 自顶向下翻译</h2>
<blockquote>
<p><code>LL(1)文法 + L-SDD</code></p>
</blockquote>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/L-SDD-16803479633441.gif" class title="L-SDD">
<p><font color="blue" size="5">在预测分析的同时实现语义翻译：</font></p>
<ul>
<li>在非递归的预测分析过程中进行翻译</li>
<li>在递归的预测分析过程中进行翻译</li>
</ul>
<h3 id="5-4-1-在非递归的预测分析过程中进行翻译">5.4.1 在非递归的预测分析过程中进行翻译</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/Top2Down.gif" class title="Top2Down">
<p><strong>分析栈中的每一个记录都对应着一段执行代码</strong></p>
<ul>
<li>综合记录出栈时，要将综合属性值复制给后面待定的语义动作</li>
<li>变量展开时（即变量本身的记录出栈时），如果其含有继承属性，则要将继承属性值复制给后面特定的语义动作</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508170014697.png" class title="image-20230508170014697">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508165247607.png" class title="image-20230508165247607">
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508165309450.png" class title="image-20230508165309450">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508165322352.png" class title="image-20230508165322352">
<h3 id="5-4-2-在递归的预测分析过程中进行翻译">5.4.2 在递归的预测分析过程中进行翻译</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508170540403.png" class title="image-20230508170540403">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508170639031.png" class title="image-20230508170639031">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508170713212.png" class title="image-20230508170713212">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508170738000.png" class title="image-20230508170738000">
<h2 id="5-5-l-sdd-自底向上翻译">5.5 L-SDD 自底向上翻译</h2>
<p>给定一个以 LL 文法为基础的 <code>L-SDD</code>，可以修改这个文法，并在 LR 语法分析过程中计算这个新文法之上的 <code>SDD</code>。</p>
<p>即 S-SDD 文法可以利用 LR 语法分析过程计算，是因为所有语义动作都位于产生式末尾，通过修改可以把 LL 文法也改成所有语义动作都位于产生式末尾的形式，从而可以使用 LR 语法分析过程计算。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230403084522579.png" class title="image-20230403084522579">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508184634387.png" class title="image-20230508184634387">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508185029388.png" class title="image-20230508185029388">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508185040375.png" class title="image-20230508185040375">
<h1>第6章 中间代码生成</h1>
<h2 id="6-1-声明语句的翻译">6.1 声明语句的翻译</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508193302337.png" class title="image-20230508193302337">
<h3 id="6-1-1-类型表达式">6.1.1 类型表达式</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508193321776.png" class title="image-20230508193321776">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508193330651.png" class title="image-20230508193330651">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508193408498.png" class title="image-20230508193408498">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508193528513.png" class title="image-20230508193528513">
<h3 id="6-1-2-局部变量的存储分配">6.1.2 局部变量的存储分配</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508193653433.png" class title="image-20230508193653433">
<h3 id="6-1-3-变量声明语句的sdt">6.1.3 变量声明语句的SDT</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508193949460.png" class title="image-20230508193949460">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508194849937.png" class title="image-20230508194849937">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508195200909.png" class title="image-20230508195200909">
<h2 id="6-2-赋值语句的翻译">6.2 赋值语句的翻译</h2>
<h3 id="6-2-1-简单赋值语句的翻译">6.2.1 简单赋值语句的翻译</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508195500862.png" class title="image-20230508195500862">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508195750715.png" class title="image-20230508195750715">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508195929954.png" class title="image-20230508195929954">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508200147165.png" class title="image-20230508200147165">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/ex1.gif" class title="ex1">
<h3 id="6-2-2-数组引用的翻译">6.2.2 数组引用的翻译</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508201837220.png" class title="image-20230508201837220">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508202017462.png" class title="image-20230508202017462">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508202141353.png" class title="image-20230508202141353">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508202840628.png" class title="image-20230508202840628">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508202959611.png" class title="image-20230508202959611">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508203011008.png" class title="image-20230508203011008">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508203344235.png" class title="image-20230508203344235">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508203833952.png" class title="image-20230508203833952">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508204213799.png" class title="image-20230508204213799">
<h2 id="6-3-控制语句的翻译">6.3 控制语句的翻译</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508204334288.png" class title="image-20230508204334288">
<h3 id="6-3-1-分支语句的翻译">6.3.1 分支语句的翻译</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508204544925.png" class title="image-20230508204544925">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508204734546.png" class title="image-20230508204734546">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508204702562.png" class title="image-20230508204702562">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508205340390.png" class title="image-20230508205340390">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508213843888.png" class title="image-20230508213843888">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508205430017.png" class title="image-20230508205430017">
<p>​	<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508214911781.png" class title="image-20230508214911781"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508205945130.png" class title="image-20230508205945130"></p>
<h3 id="6-3-2-布尔表达式的翻译">6.3.2 布尔表达式的翻译</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508215212213.png" class title="image-20230508215212213">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508215220106.png" class title="image-20230508215220106">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508215237100.png" class title="image-20230508215237100">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508215258880.png" class title="image-20230508215258880">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508215309586.png" class title="image-20230508215309586">
<h3 id="6-3-3-控制流语句的sdt的例子">6.3.3 控制流语句的SDT的例子</h3>
<blockquote>
<p>回顾一下LL(1)文法，简单说就是下一步跳到哪里是确定的，这里的有些跳转需要跳过去之后才知道。</p>
</blockquote>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508221427855.png" class title="image-20230508221427855">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508221613184.png" class title="image-20230508221613184">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508221647540.png" class title="image-20230508221647540">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508222104464.png" class title="image-20230508222104464">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508222646173.png" class title="image-20230508222646173">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508225234865.png" class title="image-20230508225234865">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508225407341.png" class title="image-20230508225407341">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508225611111.png" class title="image-20230508225611111">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508230041403.png" class title="image-20230508230041403">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508230115130.png" class title="image-20230508230115130">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230508230149354.png" class title="image-20230508230149354">
<h2 id="6-4-回填-backpatching">6.4 回填（Backpatching）</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509074607030.png" class title="image-20230509074607030">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509074635099.png" class title="image-20230509074635099">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509074729756.png" class title="image-20230509074729756">
<h3 id="6-4-1-布尔表达式回填">6.4.1 布尔表达式回填</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509075028340.png" class title="image-20230509075028340">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230511132417125.png" class title="image-20230511132417125">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509075106628.png" class title="image-20230509075106628">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509075121323.png" class title="image-20230509075121323">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509075136951.png" class title="image-20230509075136951">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509075704473.png" class title="image-20230509075704473">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509075939614.png" class title="image-20230509075939614">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509080111796.png" class title="image-20230509080111796">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509080245602.png" class title="image-20230509080245602">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509080339392.png" class title="image-20230509080339392">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509080608243.png" class title="image-20230509080608243">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509080905001.png" class title="image-20230509080905001">
<h3 id="6-4-2-控制流语句回填">6.4.2 控制流语句回填</h3>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509082858939.png" class title="image-20230509082858939">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509083156860.png" class title="image-20230509083156860">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509083508024.png" class title="image-20230509083508024">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509083913385.png" class title="image-20230509083913385">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509083941946.png" class title="image-20230509083941946">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509084009119.png" class title="image-20230509084009119">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509084043540.png" class title="image-20230509084043540">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509084107532.png" class title="image-20230509084107532">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509084358221.png" class title="image-20230509084358221">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509084614574.png" class title="image-20230509084614574">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509084716293.png" class title="image-20230509084716293">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509084854821.png" class title="image-20230509084854821">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509085027355.png" class title="image-20230509085027355">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509085114002.png" class title="image-20230509085114002">
<h2 id="6-5-switch语句的翻译">6.5 switch语句的翻译</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509085813076.png" class title="image-20230509085813076">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509085842671.png" class title="image-20230509085842671">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509085855875.png" class title="image-20230509085855875">
<h2 id="6-6-过程调用语句的翻译">6.6 过程调用语句的翻译</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509090420054.png" class title="image-20230509090420054">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509090449716.png" class title="image-20230509090449716">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/p/ecc774e9/image-20230509090507049.png" class title="image-20230509090507049">
<p><font color="blue">后面没时间记笔记了，放个大纲方便回忆。</font></p>
<h1>第7章 运行存储分配</h1>
<h2 id="7-1-存储组织">7.1 存储组织</h2>
<h2 id="7-2-静态存储分配">7.2 静态存储分配</h2>
<h2 id="7-3-栈式存储分配">7.3 栈式存储分配</h2>
<h2 id="7-4-非局部数据的访问">7.4 非局部数据的访问</h2>
<h2 id="7-5-参数传递">7.5 参数传递</h2>
<h2 id="7-6-符号表">7.6 符号表</h2>
<h1>第8章 代码优化</h1>
<h2 id="8-1-流图">8.1 流图</h2>
<h2 id="8-2-优化的分类">8.2 优化的分类</h2>
<h2 id="8-3-基本块的优化">8.3 基本块的优化</h2>
<h2 id="8-4-数据流分析">8.4 数据流分析</h2>
<h2 id="8-5-流图中的循环">8.5 流图中的循环</h2>
<h2 id="8-6-全局优化">8.6 全局优化</h2>
<h1>第9章 代码生成</h1>
<h2 id="9-1-代码生成器的主要任务">9.1 代码生成器的主要任务</h2>
<h2 id="9-2-一个简单的目标机模型">9.2 一个简单的目标机模型</h2>
<h2 id="9-3-指令选择">9.3 指令选择</h2>
<h2 id="9-4-寄存器的选择">9.4 寄存器的选择</h2>
<h2 id="9-5-窥孔优化">9.5 窥孔优化</h2>
<h1># 考后思考</h1>
<p>可以看到我复习的时间留了不到一周，边记笔记边复习，复习到后面时间就非常紧张了，但是不得不说记过笔记的部分掌握的就是好，而且做题的时候也方便回看（效果来自边贴PPT，边解释PPT）。MOOC 课后题能全做一遍是最好的，可以掌握的比较扎实。</p>
<p>感觉这样复习一遍后，MOOC 选择题我也没做，不过考试选填似乎也没什么压力。</p>
<p>7，8章复习的不扎实，但是考的很多，还好不是完全不会。</p>
<p>大题：</p>
<ol>
<li>LL(1) 和 LR(1) 必考</li>
<li>中间代码生成考了补充流程图的部分</li>
<li>运行内存分配部分，一定要把栈的结构搞清楚，每一部分是干什么的，尤其是控制链、访问链，返回地址、层级关系这些着重复习</li>
<li>符号表的创建过程要很熟悉，可能不会让你画，但是其中的逻辑关系会考</li>
<li>代码优化部分的流图</li>
<li>优化方法，以及优化的过程中如何判断是否可以优化（比如能否将循环不变量外放，要知道有哪些需要满足哪些判据）</li>
<li>基本块的优化</li>
<li>流图的循环、活动变量</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://tomatoyuan.github.io">tomatoyuan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://tomatoyuan.github.io/p/ecc774e9.html">https://tomatoyuan.github.io/p/ecc774e9.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://tomatoyuan.github.io" target="_blank">番茄元🍅の小窝</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a></div><div class="post_share"><div class="social-share" data-image="/img/bg95.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/p/21e292c5.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/bg100.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">NVIDIA显卡重新安装</div></div></a></div><div class="next-post pull-right"><a href="/p/66899ed4.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/bg57.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Typora导出pdf一直停留在导出界面</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/mylogo.bmp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">tomatoyuan</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">59</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/tomatoyuan"><i class="fab fa-github"></i><span>🛴带你去我家...</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/tomatoyuan" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:Awellfrog@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><center>主域名：<br><a href="https://tomatoyuan.github.io"><b><font color="#5ea6e5">tomatoyuan.github.io</font></b></a></center></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">第1章 绪论</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BC%96%E8%AF%91"><span class="toc-text">1.1 什么是编译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">1.2 编译系统的结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90-%E6%89%AB%E6%8F%8F-scanning"><span class="toc-text">1.2.1 词法分析&#x2F;扫描（Scanning）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90-parsing"><span class="toc-text">1.2.2 语法分析（parsing）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-%E8%AF%AD%E4%B9%89%E5%88%86%E6%9E%90"><span class="toc-text">1.2.3 语义分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-4-%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">1.2.4 中间代码生成器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-5-%E7%9B%AE%E6%A0%87%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">1.2.5 目标代码生成器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-6-%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="toc-text">1.2.6 代码优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E7%BC%96%E8%AF%91%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%94%9F%E6%88%90"><span class="toc-text">1.3 编译程序的生成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-font-color-green-size-5-b-%E8%87%AA%E5%B1%95-b-font"><span class="toc-text">1.3.1 自展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-font-color-green-size-5-b-%E7%A7%BB%E6%A4%8D-%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91-b-font"><span class="toc-text">1.3.2 移植（交叉编译）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%E4%B9%A0%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86"><span class="toc-text">1.4 为什么要学习编译原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E7%BC%96%E8%AF%91%E6%8A%80%E6%9C%AF%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">1.5 编译技术的应用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">第2章 语言及其文法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">2.1 基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E6%96%87%E6%B3%95%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">2.2 文法的定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">2.3 语言的定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-font-color-green-size-5-b-%E6%96%87%E6%B3%95-b-font"><span class="toc-text">2.3.1 文法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-font-color-green-size-5-b-%E6%8E%A8%E5%AF%BC-derivations-%E5%92%8C%E5%BD%92%E7%BA%A6-reductions-b-font"><span class="toc-text">2.3.2 推导（Derivations）和归约（Reductions）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-font-color-green-size-5-b-%E5%8F%A5%E5%9E%8B-sentential-form-%E5%92%8C%E5%8F%A5%E5%AD%90-sentence-b-font"><span class="toc-text">2.3.3 句型（sentential form）和句子（sentence）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-4-font-color-green-size-5-b-%E8%AF%AD%E8%A8%80%E7%9A%84%E5%BD%A2%E5%BC%8F%E5%8C%96%E5%AE%9A%E4%B9%89-b-font"><span class="toc-text">2.3.4 语言的形式化定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-5-font-color-green-size-5-b-%E8%AF%AD%E8%A8%80%E4%B8%8A%E7%9A%84%E8%BF%90%E7%AE%97-b-font"><span class="toc-text">2.3.5 语言上的运算</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E6%96%87%E6%B3%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">2.4 文法的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1-font-color-green-size-5-b-0%E5%9E%8B-%E6%96%87%E6%B3%95-type-0-grammer-b-font"><span class="toc-text">2.4.1 0型 文法（Type-0 Grammer）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-2-font-color-green-size-5-b-1%E5%9E%8B-%E6%96%87%E6%B3%95-type-1-grammer-b-font"><span class="toc-text">2.4.2 1型 文法（Type-1 Grammer）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-3-font-color-green-size-5-b-2%E5%9E%8B-%E6%96%87%E6%B3%95-type-2-grammer-b-font"><span class="toc-text">2.4.3 2型 文法（Type-2 Grammer）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-4-font-color-green-size-5-b-3%E5%9E%8B-%E6%96%87%E6%B3%95-type-3-grammer-b-font"><span class="toc-text">2.4.4 3型 文法（Type-3 Grammer）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-5-font-color-green-size-5-b-%E5%9B%9B%E7%A7%8D%E6%96%87%E6%B3%95%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB-b-font"><span class="toc-text">2.4.5 四种文法之间的关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-cfg%E7%9A%84%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%E6%A0%91"><span class="toc-text">2.5 CFG的语法分析树</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-font-color-green-size-5-b-%E6%A0%91%E7%9A%84%E4%BA%A7%E5%87%BA-yield-%E6%88%96%E8%BE%B9%E7%BC%98-frontier-b-font"><span class="toc-text">2.5.1 树的产出（yield）或边缘（frontier）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-font-color-green-size-5-b-%E7%9F%AD%E8%AF%AD-phrase-%E5%92%8C%E7%9B%B4%E6%8E%A5%E7%9F%AD%E8%AF%AD-immediate-phrase-b-font"><span class="toc-text">2.5.2 短语（phrase）和直接短语（immediate phrase）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-3-font-color-green-size-5-b-%E4%BA%8C%E4%B9%89%E6%80%A7%E6%96%87%E6%B3%95-ambiguous-grammer-b-font"><span class="toc-text">2.5.3 二义性文法（Ambiguous Grammer）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">第3章 词法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%8D%95%E8%AF%8D%E7%9A%84%E6%8F%8F%E8%BF%B0"><span class="toc-text">3.1 单词的描述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-font-color-green-size-5-b-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-regular-expression-re-b-font"><span class="toc-text">3.1.1 正则表达式（Regular Expression, RE）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-font-color-green-size-5-b-%E6%AD%A3%E5%88%99%E5%AE%9A%E4%B9%89-regular-definition-b-font"><span class="toc-text">3.1.2 正则定义（Regular Definition）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E5%8D%95%E8%AF%8D%E7%9A%84%E8%AF%86%E5%88%AB"><span class="toc-text">3.2 单词的识别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-font-color-green-size-5-b-%E6%9C%89%E7%A9%B7%E8%87%AA%E5%8A%A8%E6%9C%BA-finite-automata-b-font"><span class="toc-text">3.2.1  有穷自动机（Finite Automata）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-font-color-green-size-5-b-%E6%9C%89%E7%A9%B7%E8%87%AA%E5%8A%A8%E6%9C%BA%E7%9A%84%E5%88%86%E7%B1%BB-b-font"><span class="toc-text">3.2.2  有穷自动机的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E7%A1%AE%E5%AE%9A%E7%9A%84fa-deterministic-finite-automata-dfa"><span class="toc-text">①确定的FA（Deterministic finite automata, DFA）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E9%9D%9E%E7%A1%AE%E5%AE%9A%E7%9A%84fa-nondeterministic-finite-automata-nfa"><span class="toc-text">②非确定的FA（Nondeterministic finite automata, NFA）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2dfa%E4%B8%8Enfa%E7%9A%84%E7%AD%89%E4%BB%B7%E6%80%A7"><span class="toc-text">③DFA与NFA的等价性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3re-nfa-dfa-%E8%BD%AC%E5%8C%96"><span class="toc-text">④RE-&gt;NFA-&gt;DFA(转化)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A4%E5%B8%A6%E6%9C%89-varepsilon-%E8%BE%B9-%E7%9A%84nfa"><span class="toc-text">⑤带有“ε−\varepsilon -ε−边”的NFA</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%91%A5%E5%B8%A6%E6%9C%89%E5%92%8C%E4%B8%8D%E5%B8%A6%E6%9C%89-varepsilon-%E8%BE%B9-%E7%9A%84nfa%E7%9A%84%E7%AD%89%E4%BB%B7%E6%80%A7"><span class="toc-text">⑥带有和不带有“ε−\varepsilon-ε−边”的NFA的等价性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-font-color-green-size-5-b-%E4%BB%8E%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%88%B0%E6%9C%89%E7%A9%B7%E8%87%AA%E5%8A%A8%E6%9C%BA-b-font"><span class="toc-text">3.2.3  从正则表达式到有穷自动机</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E9%9B%86%E6%9E%84%E9%80%A0%E6%B3%95-subset-construction-%E4%BC%AA%E4%BB%A3%E7%A0%81"><span class="toc-text">子集构造法（subset construction）伪代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-4-font-color-green-size-5-b-%E8%AF%86%E5%88%AB%E5%8D%95%E8%AF%8D%E7%9A%84dfa-b-font"><span class="toc-text">3.2.4  识别单词的DFA</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E9%98%B6%E6%AE%B5%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-text">3.3 词法分析阶段的错误处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-font-color-green-size-5-b-%E9%94%99%E8%AF%AF%E6%A3%80%E6%B5%8B%E7%B1%BB%E5%9E%8B-b-font"><span class="toc-text">3.3.1 错误检测类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-font-color-green-size-5-b-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86-b-font"><span class="toc-text">3.3.2 错误处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-font-color-green-size-5-b-%E9%94%99%E8%AF%AF%E6%81%A2%E5%A4%8D%E7%AD%96%E7%95%A5-b-font"><span class="toc-text">3.3.3 错误恢复策略</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7-lex"><span class="toc-text">3.4 词法分析器生成工具 Lex</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">第4章 语法分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E5%88%86%E6%9E%90"><span class="toc-text">4.1 自顶向下分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-font-color-green-size-5-b-%E6%9C%80%E5%B7%A6%E6%8E%A8%E5%AF%BC-left-most-derivation-b-font"><span class="toc-text">4.1.1 最左推导（Left-most Derivation）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-font-color-green-size-5-b-%E6%9C%80%E5%8F%B3%E6%8E%A8%E5%AF%BC-right-most-derivation-b-font"><span class="toc-text">4.1.2 最右推导（Right-most Derivation）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3-font-color-green-size-5-b-%E8%87%AA%E5%AE%9A%E5%90%91%E4%B8%8B%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%E7%9A%84%E9%80%9A%E7%94%A8%E5%BD%A2%E5%BC%8F-b-font"><span class="toc-text">4.1.3 自定向下语法分析的通用形式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-4-font-color-green-size-5-b-%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E5%88%86%E6%9E%90%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98-b-font"><span class="toc-text">4.1.4 自顶向下分析存在的问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E9%A2%84%E6%B5%8B%E5%88%86%E6%9E%90%E6%B3%95-predictive-parsing"><span class="toc-text">4.2 预测分析法（Predictive Parsing）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-font-color-green-size-5-b-ll-1-%E6%96%87%E6%B3%95-b-font"><span class="toc-text">4.2.1 LL(1) 文法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#s-%E6%96%87%E6%B3%95"><span class="toc-text">S_ 文法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#first-%E9%9B%86"><span class="toc-text">FIRST 集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#follow-a-%E9%9B%86"><span class="toc-text">FOLLOW(A) 集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#select-%E9%9B%86"><span class="toc-text">SELECT 集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#q-%E6%96%87%E6%B3%95"><span class="toc-text">q_ 文法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%84%E6%B5%8B%E5%88%86%E6%9E%90%E8%A1%A8"><span class="toc-text">预测分析表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ll-1-%E6%96%87%E6%B3%95"><span class="toc-text">LL(1)文法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-font-color-green-size-5-b-%E9%80%92%E5%BD%92%E7%9A%84%E9%A2%84%E6%B5%8B%E5%88%86%E6%9E%90%E6%B3%95-b-font"><span class="toc-text">4.2.2 递归的预测分析法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-font-color-green-size-5-b-%E9%9D%9E%E9%80%92%E5%BD%92%E7%9A%84%E9%A2%84%E6%B5%8B%E5%88%86%E6%9E%90%E6%B3%95-b-font"><span class="toc-text">4.2.3 非递归的预测分析法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-font-color-green-size-5-b-%E9%A2%84%E6%B5%8B%E5%88%86%E6%9E%90%E4%B8%AD%E7%9A%84%E9%94%99%E8%AF%AF%E6%81%A2%E5%A4%8D-b-font"><span class="toc-text">4.2.4 预测分析中的错误恢复</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E7%9A%84%E5%88%86%E6%9E%90"><span class="toc-text">4.3 自底向上的分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-0-font-color-green-size-5-b-%E5%8F%A5%E5%9E%8B-%E7%9F%AD%E8%AF%AD-%E7%AE%80%E5%8D%95%E7%9F%AD%E8%AF%AD-%E5%8F%A5%E6%9F%84-b-font"><span class="toc-text">4.3.0 句型、短语、简单短语、句柄</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-font-color-green-size-5-b-%E7%A7%BB%E5%85%A5-%E5%BD%92%E7%BA%A6%E5%88%86%E6%9E%90-b-font"><span class="toc-text">4.3.1 移入-归约分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-font-color-green-size-5-b-%E7%A7%BB%E5%85%A5-%E5%BD%92%E7%BA%A6%E5%88%86%E6%9E%90%E4%B8%AD%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98-b-font"><span class="toc-text">4.3.2 移入-归约分析中存在的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%BD%92%E7%BA%A6-%E5%BD%92%E7%BA%A6%E5%86%B2%E7%AA%81"><span class="toc-text">1. 归约-归约冲突</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A7%BB%E5%85%A5%E5%BD%92%E7%BA%A6%E5%86%B2%E7%AA%81"><span class="toc-text">2. 移入归约冲突</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-lr-%E5%88%86%E6%9E%90%E6%B3%95"><span class="toc-text">4.4 LR 分析法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-font-color-blue-size-5-lr-%E5%88%86%E6%9E%90%E6%B3%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86-font"><span class="toc-text">4.4.1 LR 分析法的基本原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2-font-color-blue-size-5-lr-%E5%88%86%E6%9E%90%E5%99%A8-%E8%87%AA%E5%8A%A8%E6%9C%BA-%E7%9A%84%E6%80%BB%E4%BD%93%E7%BB%93%E6%9E%84-font"><span class="toc-text">4.4.2 LR 分析器（自动机）的总体结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-3-font-color-blue-size-5-lr-%E5%88%86%E6%9E%90%E5%99%A8%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B-font"><span class="toc-text">4.4.3 LR 分析器工作过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-4-%E6%9E%84%E9%80%A0%E7%BB%99%E5%AE%9A%E6%96%87%E6%B3%95%E7%9A%84-lr-%E5%88%86%E6%9E%90%E8%A1%A8"><span class="toc-text">4.4.4 构造给定文法的 LR 分析表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-lr-0-%E5%88%86%E6%9E%90"><span class="toc-text">1. LR(0)分析</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#font-size-5-lr-0-%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E5%86%B2%E7%AA%81-font"><span class="toc-text">LR(0)分析过程中的冲突</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-slr%E5%88%86%E6%9E%90"><span class="toc-text">2. SLR分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-lr-1-%E5%88%86%E6%9E%90"><span class="toc-text">3. LR(1)分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-lalr-lookahead-lr-%E5%88%86%E6%9E%90"><span class="toc-text">4. LALR（lookahead-LR）分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E4%BA%8C%E4%B9%89%E6%80%A7%E6%96%87%E6%B3%95"><span class="toc-text">5. 二义性文法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-lr%E5%88%86%E6%9E%90%E4%B8%AD%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-text">6. LR分析中的错误处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E5%88%86%E6%9E%90%E6%B3%95"><span class="toc-text">4.5 算符优先分析法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7"><span class="toc-text">4.6 语法分析器自动生成工具</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">第5章 语法制导翻译</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E8%AF%AD%E6%B3%95%E5%88%B6%E5%AF%BC%E5%AE%9A%E4%B9%89-sdd"><span class="toc-text">5.1 语法制导定义 SDD</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-s-%E5%B1%9E%E6%80%A7%E5%AE%9A%E4%B9%89%E4%B8%8El-%E5%B1%9E%E6%80%A7%E5%AE%9A%E4%B9%89"><span class="toc-text">5.2 S-属性定义与L-属性定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E8%AF%AD%E6%B3%95%E5%88%B6%E5%AF%BC%E7%BF%BB%E8%AF%91%E6%96%B9%E6%A1%88-sdt"><span class="toc-text">5.3 语法制导翻译方案 SDT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-l-sdd-%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E7%BF%BB%E8%AF%91"><span class="toc-text">5.4 L-SDD 自顶向下翻译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E5%9C%A8%E9%9D%9E%E9%80%92%E5%BD%92%E7%9A%84%E9%A2%84%E6%B5%8B%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B%E4%B8%AD%E8%BF%9B%E8%A1%8C%E7%BF%BB%E8%AF%91"><span class="toc-text">5.4.1 在非递归的预测分析过程中进行翻译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-2-%E5%9C%A8%E9%80%92%E5%BD%92%E7%9A%84%E9%A2%84%E6%B5%8B%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B%E4%B8%AD%E8%BF%9B%E8%A1%8C%E7%BF%BB%E8%AF%91"><span class="toc-text">5.4.2 在递归的预测分析过程中进行翻译</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-l-sdd-%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E7%BF%BB%E8%AF%91"><span class="toc-text">5.5 L-SDD 自底向上翻译</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">第6章 中间代码生成</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%A3%B0%E6%98%8E%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%BF%BB%E8%AF%91"><span class="toc-text">6.1 声明语句的翻译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-%E7%B1%BB%E5%9E%8B%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">6.1.1 类型表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2-%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%9A%84%E5%AD%98%E5%82%A8%E5%88%86%E9%85%8D"><span class="toc-text">6.1.2 局部变量的存储分配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-3-%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E8%AF%AD%E5%8F%A5%E7%9A%84sdt"><span class="toc-text">6.1.3 变量声明语句的SDT</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%BF%BB%E8%AF%91"><span class="toc-text">6.2 赋值语句的翻译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-%E7%AE%80%E5%8D%95%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%BF%BB%E8%AF%91"><span class="toc-text">6.2.1 简单赋值语句的翻译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2-%E6%95%B0%E7%BB%84%E5%BC%95%E7%94%A8%E7%9A%84%E7%BF%BB%E8%AF%91"><span class="toc-text">6.2.2 数组引用的翻译</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%BF%BB%E8%AF%91"><span class="toc-text">6.3 控制语句的翻译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-1-%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%BF%BB%E8%AF%91"><span class="toc-text">6.3.1 分支语句的翻译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-2-%E5%B8%83%E5%B0%94%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E7%BF%BB%E8%AF%91"><span class="toc-text">6.3.2 布尔表达式的翻译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-3-%E6%8E%A7%E5%88%B6%E6%B5%81%E8%AF%AD%E5%8F%A5%E7%9A%84sdt%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-text">6.3.3 控制流语句的SDT的例子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E5%9B%9E%E5%A1%AB-backpatching"><span class="toc-text">6.4 回填（Backpatching）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1-%E5%B8%83%E5%B0%94%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%9B%9E%E5%A1%AB"><span class="toc-text">6.4.1 布尔表达式回填</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-2-%E6%8E%A7%E5%88%B6%E6%B5%81%E8%AF%AD%E5%8F%A5%E5%9B%9E%E5%A1%AB"><span class="toc-text">6.4.2 控制流语句回填</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-switch%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%BF%BB%E8%AF%91"><span class="toc-text">6.5 switch语句的翻译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-%E8%BF%87%E7%A8%8B%E8%B0%83%E7%94%A8%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%BF%BB%E8%AF%91"><span class="toc-text">6.6 过程调用语句的翻译</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">第7章 运行存储分配</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E5%AD%98%E5%82%A8%E7%BB%84%E7%BB%87"><span class="toc-text">7.1 存储组织</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E9%9D%99%E6%80%81%E5%AD%98%E5%82%A8%E5%88%86%E9%85%8D"><span class="toc-text">7.2 静态存储分配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E6%A0%88%E5%BC%8F%E5%AD%98%E5%82%A8%E5%88%86%E9%85%8D"><span class="toc-text">7.3 栈式存储分配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-%E9%9D%9E%E5%B1%80%E9%83%A8%E6%95%B0%E6%8D%AE%E7%9A%84%E8%AE%BF%E9%97%AE"><span class="toc-text">7.4 非局部数据的访问</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-5-%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-text">7.5 参数传递</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-6-%E7%AC%A6%E5%8F%B7%E8%A1%A8"><span class="toc-text">7.6 符号表</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">第8章 代码优化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E6%B5%81%E5%9B%BE"><span class="toc-text">8.1 流图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E4%BC%98%E5%8C%96%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">8.2 优化的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-%E5%9F%BA%E6%9C%AC%E5%9D%97%E7%9A%84%E4%BC%98%E5%8C%96"><span class="toc-text">8.3 基本块的优化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-%E6%95%B0%E6%8D%AE%E6%B5%81%E5%88%86%E6%9E%90"><span class="toc-text">8.4 数据流分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-5-%E6%B5%81%E5%9B%BE%E4%B8%AD%E7%9A%84%E5%BE%AA%E7%8E%AF"><span class="toc-text">8.5 流图中的循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-6-%E5%85%A8%E5%B1%80%E4%BC%98%E5%8C%96"><span class="toc-text">8.6 全局优化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">第9章 代码生成</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8%E7%9A%84%E4%B8%BB%E8%A6%81%E4%BB%BB%E5%8A%A1"><span class="toc-text">9.1 代码生成器的主要任务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%9B%AE%E6%A0%87%E6%9C%BA%E6%A8%A1%E5%9E%8B"><span class="toc-text">9.2 一个简单的目标机模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-%E6%8C%87%E4%BB%A4%E9%80%89%E6%8B%A9"><span class="toc-text">9.3 指令选择</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4-%E5%AF%84%E5%AD%98%E5%99%A8%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-text">9.4 寄存器的选择</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-5-%E7%AA%A5%E5%AD%94%E4%BC%98%E5%8C%96"><span class="toc-text">9.5 窥孔优化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text"># 考后思考</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By tomatoyuan</div><div class="footer_custom_text">I am a frog at the bottom of a well, but I never give up climbing up.</br>我多努力一点，我爱的人就可以多休息一会儿😊<p><a target="_blank" href="https://hexo.io/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a>&nbsp;<a target="_blank" href="https://butterfly.js.org/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a>&nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&logo=Vercel" title="本站线路托管于Vercel"></a>&nbsp;<a target="_blank" href="https://vercel.com/ ">&nbsp;<a target="_blank" href="https://github.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Gtihub托管"></a>&nbsp;<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a>&nbsp;<a target="_blank" href="https://icp.gov.moe/?keyword=20230070"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E8%90%8CICP%E5%A4%87-20230070-fe1384?style-flat&logo=data:image/png" title="萌ICP备20230070号"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-api-beta-two.vercel.app/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-api-beta-two.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="/js/light.js"></script><script defer src="/js/cursor.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var qweather_key = 'c189a6faa11e45499d5f54f4af4961b9';
  var gaud_map_key = 'f373eae7d7ddbee8cd012fdc2720f4e5';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '112.982279,28.19409';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><!-- hexo injector body_end end --></body></html>